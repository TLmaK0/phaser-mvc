(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Phaser = __webpack_require__(4);
var rxjs_1 = __webpack_require__(1);
/** Bootstrap for the phaser-mvc.
 * Useage:
 * import { FrameController } from 'phaser-mvc';
 * import { LandEditorController } from 'phaser-mvc';
 * window.onload = () => {
 * const boot = new Bootstrap();
 * boot.addController('FrameController', FrameController);
 */
var Bootstrap = /** @class */ (function () {
    function Bootstrap(width, height) {
        if (width === void 0) { width = 1920; }
        if (height === void 0) { height = 1080; }
        var _this = this;
        this.width = width;
        this.height = height;
        this.controllers = {};
        this.preload = function () {
            for (var _i = 0, _a = Bootstrap.preloadComponents; _i < _a.length; _i++) {
                var preload = _a[_i];
                preload(_this.game);
            }
        };
        this.create = function () {
            _this.worldCustomizations();
            Bootstrap.onInit.next(_this);
            Bootstrap.onInit.complete();
            _this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            _this.goTo(_this.startAction[0], _this.startAction[1], _this.startAction[2]);
        };
        this.update = function () {
            for (var _i = 0, _a = Object.keys(_this.controllers); _i < _a.length; _i++) {
                var controllerName = _a[_i];
                _this.updateController(_this.controllers[controllerName]);
            }
        };
    }
    Bootstrap.preload = function (preload) {
        Bootstrap.preloadComponents.push(preload);
    };
    Bootstrap.prototype.start = function (controllerName, controllerAction, params) {
        this.startAction = [controllerName, controllerAction, params];
        this.game = new Phaser.Game(this.width, this.height, Phaser.CANVAS, 'content', { preload: this.preload,
            create: this.create,
            update: this.update });
    };
    Bootstrap.prototype.worldCustomizations = function () {
        this.game.physics.startSystem(Phaser.Physics.P2JS);
        this.worldMaterial = this.game.physics.p2.createMaterial('worldMaterial');
        this.game.physics.p2.setWorldMaterial(this.worldMaterial, true, true, true, true);
        this.game.physics.p2.gravity.y = 100;
        this.game.physics.p2.restitution = 0.8;
    };
    Bootstrap.prototype.createBody = function (physics) {
        var body = new Phaser.Physics.P2.Body(this.game, this.game.add.sprite(0, 0, null), 0, 0);
        var material = this.game.physics.p2.createMaterial('humanMaterial', body);
        var contactMaterial = this.game.physics.p2.createContactMaterial(material, this.worldMaterial);
        contactMaterial.restitution = physics['restitution'];
        return body;
    };
    Bootstrap.prototype.addController = function (name, controllerType) {
        if (this.controllers[name] != null)
            throw EvalError("Controller " + name + " already registered.");
        var controller = new controllerType();
        controller.bootstrap = this;
        this.controllers[name] = controller;
    };
    Bootstrap.prototype.goTo = function (controllerName, controllerAction, params) {
        /*tslint:disable:no-any*/
        var controller = this.controllers[controllerName];
        /*tslint:enable:no-any*/
        if (!controller) {
            throw EvalError("Controller " + controllerName + " not exist. Be sure you load it in bootstrap.");
        }
        /*tslint:disable:no-unsafe-any*/
        controller[controllerAction](params);
        /*tslint:enable:no-unsafe-any*/
    };
    Bootstrap.prototype.updateController = function (controller) {
        for (var _i = 0, _a = Object.keys(controller.views); _i < _a.length; _i++) {
            var viewName = _a[_i];
            controller.getView(viewName).updateView();
        }
    };
    Bootstrap.preloadComponents = [];
    Bootstrap.onInit = new rxjs_1.AsyncSubject();
    return Bootstrap;
}());
exports.Bootstrap = Bootstrap;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_model_1 = __webpack_require__(7);
var rxjs_1 = __webpack_require__(1);
var _ = __webpack_require__(8);
var WatchFactory = /** @class */ (function () {
    function WatchFactory() {
        this.watchsModel = [];
    }
    WatchFactory.prototype.create = function (getModel) {
        var watchModel = new watch_model_1.WatchModel();
        watchModel.observable = rxjs_1.Observable.create(function (observer) { return watchModel.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        watchModel.getModel = getModel;
        this.watchsModel.push(watchModel);
        return watchModel.observable;
    };
    return WatchFactory;
}());
exports.WatchFactory = WatchFactory;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
exports.Bootstrap = bootstrap_1.Bootstrap;
var controller_1 = __webpack_require__(5);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(6);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var watch_factory_1 = __webpack_require__(2);
exports.WatchFactory = watch_factory_1.WatchFactory;
var body_1 = __webpack_require__(9);
exports.Body = body_1.Body;


/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("phaser-ce");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function () {
    function Controller() {
        var _this = this;
        this.views = {};
        this.model = {};
        this.goTo = function (controllerName, controllerAction, params) {
            _this.bootstrap.goTo(controllerName, controllerAction, params);
        };
    }
    Object.defineProperty(Controller.prototype, "game", {
        get: function () {
            return this.bootstrap.game;
        },
        enumerable: true,
        configurable: true
    });
    Controller.prototype.getView = function (viewName) {
        var view = this.views[viewName];
        if (view == null) {
            throw EvalError("View " + viewName + " not exist. Be sure you have added it to your controller.");
        }
        return view;
    };
    Controller.prototype.render = function (view) {
        view.init(this.game, this.model, this.goTo);
    };
    Controller.prototype.refresh = function (view) {
        view.refresh();
    };
    return Controller;
}());
exports.Controller = Controller;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_factory_1 = __webpack_require__(2);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function () {
    function View() {
        this.components = [];
        this.initiated = false;
        this.watchFactory = new watch_factory_1.WatchFactory();
    }
    View.prototype.refresh = function () {
        //empty, can be overrided or not
    };
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.preload = function () {
        //empty, can be overrided or not
    };
    View.prototype.update = function () {
        //empty, can be overrided or not
    };
    View.prototype.init = function (game, model, goTo) {
        if (!this.initiated) {
            this._game = game;
            this._model = model;
            this._goTo = goTo;
            this.createView();
            this.initiated = true;
        }
    };
    Object.defineProperty(View.prototype, "game", {
        get: function () { return this._game; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(View.prototype, "model", {
        get: function () { return this._model; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        var componentAdder = new ViewComponentAdder(this.components, this);
        this.create(componentAdder);
        this.updateOnModelChange(this.watchFactory);
    };
    View.prototype.updateView = function () {
        if (!this.initiated)
            return;
        this.checkWatchModels();
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    View.prototype.refreshView = function () {
        if (!this.initiated)
            throw EvalError('View is not rendered please render it before refresh.');
        this.refresh();
    };
    View.prototype.updateOnModelChange = function (_watchFactory) {
        //this should be overrided or not
    };
    View.prototype.checkWatchModels = function () {
        for (var _i = 0, _a = this.watchFactory.watchsModel; _i < _a.length; _i++) {
            var watchModel = _a[_i];
            watchModel.observer.next(watchModel.getModel());
        }
    };
    View.prototype.goTo = function (controllerName, controllerAction, params) {
        this._goTo(controllerName, controllerAction, params);
    };
    return View;
}());
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function () {
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    Object.defineProperty(ViewComponent.prototype, "game", {
        get: function () {
            return this.view.game;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WatchModel = /** @class */ (function () {
    function WatchModel() {
    }
    return WatchModel;
}());
exports.WatchModel = WatchModel;


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Body decorator
 *
 * @Body
 * class Ball {
 * }
 *
 * will add x and y, and will be updated by game world
 */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
function Body(target) {
    Object.defineProperty(target.prototype, 'x', {
        get: function () {
            return this._body.x;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(target.prototype, 'y', {
        get: function () {
            return this._body.y;
        },
        enumerable: false,
        configurable: true
    });
    return /** @class */ (function (_super) {
        __extends(class_1, _super);
        function class_1() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var _this = _super.call(this, args) || this;
            bootstrap_1.Bootstrap.onInit.subscribe(function (bootstrap) {
                _this._body = bootstrap.createBody(_this['physics']);
            });
            return _this;
        }
        return class_1;
    }(target));
}
exports.Body = Body;


/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzBjOTc3ZjQxMzNjMGFjNzExOGEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jvb3RzdHJhcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvd2F0Y2hfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGhhc2VyLWNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dhdGNoX21vZGVsLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy8uL3NyYy9ib2R5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7O0FDN0RBO0dBQ0c7O0FBRUgsb0NBQW9DO0FBS3BDLG9DQUErQztBQUUvQzs7Ozs7OztHQU9HO0FBRUg7SUFTRSxtQkFBMEIsS0FBb0IsRUFBUyxNQUFxQjtRQUFsRCxvQ0FBb0I7UUFBUyxzQ0FBcUI7UUFBNUUsaUJBQ0M7UUFEeUIsVUFBSyxHQUFMLEtBQUssQ0FBZTtR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QWIscUJBQWEsRUFBYixJQUFhO2dCQUFiLHlCQUFhOztZQUF6QixZQUNFLGtCQUFNLElBQUksQ0FBQyxTQUlaO1lBSEMscUJBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFVBQUMsU0FBb0I7Z0JBQzlDLEtBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLFVBQVUsQ0FBTyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM1RCxDQUFDLENBQUMsQ0FBQzs7UUFDTCxDQUFDO1FBQ0gsY0FBQztJQUFELENBQUMsQ0FSb0IsTUFBTSxHQVExQjtBQUNILENBQUM7QUExQkQsb0JBMEJDIiwiZmlsZSI6InBoYXNlci1tdmMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzBjOTc3ZjQxMzNjMGFjNzExOGEiLCIvKipcbiAqL1xuXG5pbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAncGhhc2VyLWNlJztcblxuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgeyBJQWN0aW9uUGFyYW1zIH0gZnJvbSAnLi9pX2FjdGlvbl9wYXJhbXMnO1xuaW1wb3J0IHsgSUNvbnRyb2xsZXJNYXAgfSBmcm9tICcuL2lfY29udHJvbGxlcl9tYXAnO1xuaW1wb3J0IHsgQXN5bmNTdWJqZWN0IH0gZnJvbSAnQHJlYWN0aXZleC9yeGpzJztcblxuLyoqIEJvb3RzdHJhcCBmb3IgdGhlIHBoYXNlci1tdmMuXG4gKiBVc2VhZ2U6XG4gKiBpbXBvcnQgeyBGcmFtZUNvbnRyb2xsZXIgfSBmcm9tICdwaGFzZXItbXZjJztcbiAqIGltcG9ydCB7IExhbmRFZGl0b3JDb250cm9sbGVyIH0gZnJvbSAncGhhc2VyLW12Yyc7XG4gKiB3aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICogY29uc3QgYm9vdCA9IG5ldyBCb290c3RyYXAoKTtcbiAqIGJvb3QuYWRkQ29udHJvbGxlcignRnJhbWVDb250cm9sbGVyJywgRnJhbWVDb250cm9sbGVyKTtcbiAqL1xuXG5leHBvcnQgY2xhc3MgQm9vdHN0cmFwIHtcbiAgcHJpdmF0ZSBzdGF0aWMgcHJlbG9hZENvbXBvbmVudHM6ICgoZ2FtZTogUGhhc2VyLkdhbWUpID0+IHZvaWQpW10gPSBbXTtcblxuICBwdWJsaWMgZ2FtZTogUGhhc2VyLkdhbWU7XG4gIHByb3RlY3RlZCBjb250cm9sbGVyczogSUNvbnRyb2xsZXJNYXAgPSB7fTtcbiAgcHJpdmF0ZSBzdGFydEFjdGlvbjogW3N0cmluZywgc3RyaW5nLCBJQWN0aW9uUGFyYW1zXTtcblxuICBwdWJsaWMgc3RhdGljIG9uSW5pdDogQXN5bmNTdWJqZWN0PEJvb3RzdHJhcD4gPSBuZXcgQXN5bmNTdWJqZWN0PEJvb3RzdHJhcD4oKTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IocHVibGljIHdpZHRoOiBudW1iZXIgPSAxOTIwLCBwdWJsaWMgaGVpZ2h0OiBudW1iZXIgPSAxMDgwKXtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgcHJlbG9hZChwcmVsb2FkOiAoZ2FtZTogUGhhc2VyLkdhbWUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBCb290c3RyYXAucHJlbG9hZENvbXBvbmVudHMucHVzaChwcmVsb2FkKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnRBY3Rpb24gPSBbY29udHJvbGxlck5hbWUsIGNvbnRyb2xsZXJBY3Rpb24sIHBhcmFtc107XG4gICAgdGhpcy5nYW1lID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICAgUGhhc2VyLkNBTlZBUyxcbiAgICAgICdjb250ZW50JyxcbiAgICAgIHsgcHJlbG9hZDogdGhpcy5wcmVsb2FkLFxuICAgICAgICBjcmVhdGU6IHRoaXMuY3JlYXRlLFxuICAgICAgICB1cGRhdGU6IHRoaXMudXBkYXRlfSk7XG4gIH1cblxuICBwdWJsaWMgcHJlbG9hZCA9ICgpOiB2b2lkID0+IHtcbiAgICBmb3IgKGNvbnN0IHByZWxvYWQgb2YgQm9vdHN0cmFwLnByZWxvYWRDb21wb25lbnRzKSB7XG4gICAgICBwcmVsb2FkKHRoaXMuZ2FtZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNyZWF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLndvcmxkQ3VzdG9taXphdGlvbnMoKTtcblxuICAgIEJvb3RzdHJhcC5vbkluaXQubmV4dCh0aGlzKTtcbiAgICBCb290c3RyYXAub25Jbml0LmNvbXBsZXRlKCk7XG5cbiAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICB0aGlzLmdvVG8odGhpcy5zdGFydEFjdGlvblswXSwgdGhpcy5zdGFydEFjdGlvblsxXSwgdGhpcy5zdGFydEFjdGlvblsyXSk7XG4gIH1cblxuICBwcml2YXRlIHdvcmxkTWF0ZXJpYWw6IFBoYXNlci5QaHlzaWNzLlAyLk1hdGVyaWFsO1xuICBwcml2YXRlIHdvcmxkQ3VzdG9taXphdGlvbnMoKXtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5QMkpTKTtcbiAgICB0aGlzLndvcmxkTWF0ZXJpYWwgPSB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVNYXRlcmlhbCgnd29ybGRNYXRlcmlhbCcpO1xudGhpcy5nYW1lLnBoeXNpY3MucDIuc2V0V29ybGRNYXRlcmlhbCh0aGlzLndvcmxkTWF0ZXJpYWwsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmdyYXZpdHkueSA9IDEwMDtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5yZXN0aXR1dGlvbiA9IDAuODtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVCb2R5KHBoeXNpY3M6IGFueSl7XG4gICAgY29uc3QgYm9keSA9IG5ldyBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5KHRoaXMuZ2FtZSwgdGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCBudWxsKSwgMCwgMCk7XG4gICAgdmFyIG1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoJ2h1bWFuTWF0ZXJpYWwnLCBib2R5KTtcbiAgICB2YXIgY29udGFjdE1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlQ29udGFjdE1hdGVyaWFsKG1hdGVyaWFsLCB0aGlzLndvcmxkTWF0ZXJpYWwpO1xuICAgIGNvbnRhY3RNYXRlcmlhbC5yZXN0aXR1dGlvbiA9IHBoeXNpY3NbJ3Jlc3RpdHV0aW9uJ107XG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgY29udHJvbGxlck5hbWUgb2YgT2JqZWN0LmtleXModGhpcy5jb250cm9sbGVycykpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbGxlcig8Q29udHJvbGxlcj50aGlzLmNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZENvbnRyb2xsZXI8VCBleHRlbmRzIENvbnRyb2xsZXI+KG5hbWU6IHN0cmluZywgY29udHJvbGxlclR5cGU6IG5ldyAoKSA9PiBUKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29udHJvbGxlcnNbbmFtZV0gIT0gbnVsbCkgdGhyb3cgRXZhbEVycm9yKGBDb250cm9sbGVyICR7bmFtZX0gYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuXG4gICAgY29uc3QgY29udHJvbGxlcjogVCA9IG5ldyBjb250cm9sbGVyVHlwZSgpO1xuICAgIGNvbnRyb2xsZXIuYm9vdHN0cmFwID0gdGhpcztcbiAgICB0aGlzLmNvbnRyb2xsZXJzW25hbWVdID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBnb1RvKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKTogdm9pZCB7XG4gICAgLyp0c2xpbnQ6ZGlzYWJsZTpuby1hbnkqL1xuICAgIGNvbnN0IGNvbnRyb2xsZXI6IGFueSA9IHRoaXMuY29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdO1xuICAgIC8qdHNsaW50OmVuYWJsZTpuby1hbnkqL1xuICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgdGhyb3cgRXZhbEVycm9yKGBDb250cm9sbGVyICR7Y29udHJvbGxlck5hbWV9IG5vdCBleGlzdC4gQmUgc3VyZSB5b3UgbG9hZCBpdCBpbiBib290c3RyYXAuYCk7XG4gICAgfVxuICAgIC8qdHNsaW50OmRpc2FibGU6bm8tdW5zYWZlLWFueSovXG4gICAgY29udHJvbGxlcltjb250cm9sbGVyQWN0aW9uXShwYXJhbXMpO1xuICAgIC8qdHNsaW50OmVuYWJsZTpuby11bnNhZmUtYW55Ki9cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29udHJvbGxlcihjb250cm9sbGVyOiBDb250cm9sbGVyKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCB2aWV3TmFtZSBvZiBPYmplY3Qua2V5cyhjb250cm9sbGVyLnZpZXdzKSkge1xuICAgICAgY29udHJvbGxlci5nZXRWaWV3KHZpZXdOYW1lKS51cGRhdGVWaWV3KCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9vdHN0cmFwLnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQHJlYWN0aXZleC9yeGpzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHJlYWN0aXZleC9yeGpzXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgV2F0Y2hNb2RlbCB9IGZyb20gJy4vd2F0Y2hfbW9kZWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgV2F0Y2hGYWN0b3J5IHtcbiAgcHVibGljIHdhdGNoc01vZGVsOiBXYXRjaE1vZGVsPGFueT5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCl7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlPFQ+KGdldE1vZGVsOiAoKSA9PiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3Qgd2F0Y2hNb2RlbCA9IG5ldyBXYXRjaE1vZGVsPFQ+KCk7XG5cbiAgICB3YXRjaE1vZGVsLm9ic2VydmFibGUgPSBPYnNlcnZhYmxlLmNyZWF0ZShcbiAgICAgIChvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD4pID0+IHdhdGNoTW9kZWwub2JzZXJ2ZXIgPSBvYnNlcnZlclxuICAgICkubWFwKFxuICAgICAgKG1vZGVsOiBUKSA9PiBfLmNsb25lRGVlcChtb2RlbClcbiAgICApLmRpc3RpbmN0VW50aWxDaGFuZ2VkKFxuICAgICAgKHByZXY6IFQsIG5leHQ6IFQpID0+IF8uaXNFcXVhbChwcmV2LCBuZXh0KVxuICAgICk7XG5cbiAgICB3YXRjaE1vZGVsLmdldE1vZGVsID0gZ2V0TW9kZWw7XG5cbiAgICB0aGlzLndhdGNoc01vZGVsLnB1c2god2F0Y2hNb2RlbCk7IFxuXG4gICAgcmV0dXJuIHdhdGNoTW9kZWwub2JzZXJ2YWJsZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dhdGNoX2ZhY3RvcnkudHMiLCJleHBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5leHBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmV4cG9ydCB7IFZpZXcsIFZpZXdDb21wb25lbnQgfSBmcm9tICcuL3ZpZXcnO1xuZXhwb3J0IHsgV2F0Y2hGYWN0b3J5IH0gZnJvbSAnLi93YXRjaF9mYWN0b3J5JztcbmV4cG9ydCB7IEJvZHkgfSBmcm9tICcuL2JvZHknO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGhhc2VyLWNlXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicGhhc2VyLWNlXCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlci1jZSc7XG5cbmltcG9ydCB7IEJvb3RzdHJhcCB9IGZyb20gJy4vYm9vdHN0cmFwJztcbmltcG9ydCB7IElBY3Rpb25QYXJhbXMgfSBmcm9tICcuL2lfYWN0aW9uX3BhcmFtcyc7XG5pbXBvcnQgeyBJQ29udHJvbGxlck1hcCB9IGZyb20gJy4vaV9jb250cm9sbGVyX21hcCc7XG5pbXBvcnQgeyBJTW9kZWwgfSBmcm9tICcuL2lfbW9kZWwnO1xuaW1wb3J0IHsgSVZpZXdNYXAgfSBmcm9tICcuL2lfdmlld19tYXAnO1xuaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5cbi8qKlxuICogQ29udHJvbGxlciBhY2NlcHRzIGlucHV0IGZyb20gdmlldyBhbmQgY29udmVydHMgbW9kaWZpZWRzIHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbnRyb2xsZXIge1xuICBwdWJsaWMgdmlld3M6IElWaWV3TWFwID0ge307XG4gIHB1YmxpYyBib290c3RyYXA6IEJvb3RzdHJhcDtcbiAgcHVibGljIG1vZGVsOiBJTW9kZWwgPSB7fTtcblxuICBwdWJsaWMgZ2V0IGdhbWUoKTogUGhhc2VyLkdhbWUge1xuICAgIHJldHVybiB0aGlzLmJvb3RzdHJhcC5nYW1lO1xuICB9XG5cbiAgcHVibGljIGdvVG8gPSAoY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpID0+IHtcbiAgICB0aGlzLmJvb3RzdHJhcC5nb1RvKGNvbnRyb2xsZXJOYW1lLCBjb250cm9sbGVyQWN0aW9uLCBwYXJhbXMpO1xuICB9XG5cbiAgcHVibGljIGdldFZpZXcodmlld05hbWU6IHN0cmluZyk6IFZpZXcge1xuICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXdzW3ZpZXdOYW1lXTtcbiAgICBpZiAodmlldyA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBFdmFsRXJyb3IoYFZpZXcgJHt2aWV3TmFtZX0gbm90IGV4aXN0LiBCZSBzdXJlIHlvdSBoYXZlIGFkZGVkIGl0IHRvIHlvdXIgY29udHJvbGxlci5gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmlldztcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIodmlldzogVmlldyk6IHZvaWQge1xuICAgIHZpZXcuaW5pdCh0aGlzLmdhbWUsIHRoaXMubW9kZWwsIHRoaXMuZ29Ubyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVmcmVzaCh2aWV3OiBWaWV3KTogdm9pZCB7XG4gICAgdmlldy5yZWZyZXNoKCk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb250cm9sbGVyLnRzIiwiaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlci1jZSc7XG5cbmltcG9ydCB7IElBY3Rpb25QYXJhbXMgfSBmcm9tICcuL2lfYWN0aW9uX3BhcmFtcyc7XG5pbXBvcnQgeyBJTW9kZWwgfSBmcm9tICcuL2lfbW9kZWwnO1xuaW1wb3J0IHsgV2F0Y2hNb2RlbCB9IGZyb20gJy4vd2F0Y2hfbW9kZWwnO1xuaW1wb3J0IHsgV2F0Y2hGYWN0b3J5IH0gZnJvbSAnLi93YXRjaF9mYWN0b3J5JztcblxuLyoqXG4gKiBBZGRzIGEgY29tcG9uZW50IHRvIHRoZSB2aWV3IGFuZCBvdGhlciB2aWV3IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnRBZGRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29tcG9uZW50czogVmlld0NvbXBvbmVudFtdLCBwcml2YXRlIHZpZXc6IFZpZXcpIHt9XG5cbiAgcHVibGljIGFkZENvbXBvbmVudDxUIGV4dGVuZHMgVmlld0NvbXBvbmVudD4oY29tcG9uZW50OiBUKTogVCB7XG4gICAgdGhpcy5jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICBjb21wb25lbnQuY3JlYXRlQ29tcG9uZW50KHRoaXMsIHRoaXMudmlldyk7XG5cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG59XG5cbi8qKlxuICogSW5wdXQgYW5kIG91cHV0IGZvciB0aGUgYXBwbGljYXRpb25cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFZpZXcge1xuICBwcm90ZWN0ZWQgY29tcG9uZW50czogVmlld0NvbXBvbmVudFtdID0gW107XG4gIHByb3RlY3RlZCBpbml0aWF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZ2FtZTogUGhhc2VyLkdhbWU7XG4gIHByaXZhdGUgX21vZGVsOiBJTW9kZWw7XG4gIHByaXZhdGUgX2dvVG86IChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcykgPT4gdm9pZDtcbiAgcHJpdmF0ZSB3YXRjaEZhY3Rvcnk6IFdhdGNoRmFjdG9yeSA9IG5ldyBXYXRjaEZhY3RvcnkoKTtcblxuICBwdWJsaWMgcmVmcmVzaCgpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyBjcmVhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXIpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyBwcmVsb2FkKCkge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cbiAgcHVibGljIHVwZGF0ZSgpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIGluaXQoZ2FtZTogUGhhc2VyLkdhbWUsIG1vZGVsOiBJTW9kZWwsIGdvVG86IChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcykgPT4gdm9pZCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0ZWQpIHtcbiAgICAgIHRoaXMuX2dhbWUgPSBnYW1lO1xuICAgICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcbiAgICAgIHRoaXMuX2dvVG8gPSBnb1RvO1xuICAgICAgdGhpcy5jcmVhdGVWaWV3KCk7XG4gICAgICB0aGlzLmluaXRpYXRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGdhbWUoKTogUGhhc2VyLkdhbWUgeyByZXR1cm4gdGhpcy5fZ2FtZTsgfVxuXG4gIGdldCBtb2RlbCgpOiBJTW9kZWwgeyByZXR1cm4gdGhpcy5fbW9kZWw7IH1cblxuICBwdWJsaWMgY3JlYXRlVmlldygpIHtcbiAgICBjb25zdCBjb21wb25lbnRBZGRlciA9IG5ldyBWaWV3Q29tcG9uZW50QWRkZXIodGhpcy5jb21wb25lbnRzLCB0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZShjb21wb25lbnRBZGRlcik7XG4gICAgdGhpcy51cGRhdGVPbk1vZGVsQ2hhbmdlKHRoaXMud2F0Y2hGYWN0b3J5KTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWaWV3KCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0ZWQpIHJldHVybjtcbiAgICB0aGlzLmNoZWNrV2F0Y2hNb2RlbHMoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnVwZGF0ZUNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoVmlldygpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdGVkKSB0aHJvdyBFdmFsRXJyb3IoJ1ZpZXcgaXMgbm90IHJlbmRlcmVkIHBsZWFzZSByZW5kZXIgaXQgYmVmb3JlIHJlZnJlc2guJyk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlT25Nb2RlbENoYW5nZShfd2F0Y2hGYWN0b3J5OiBXYXRjaEZhY3Rvcnkpe1xuICAgIC8vdGhpcyBzaG91bGQgYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1dhdGNoTW9kZWxzKCl7XG4gICAgZm9yKGNvbnN0IHdhdGNoTW9kZWwgb2YgdGhpcy53YXRjaEZhY3Rvcnkud2F0Y2hzTW9kZWwpe1xuICAgICAgd2F0Y2hNb2RlbC5vYnNlcnZlci5uZXh0KHdhdGNoTW9kZWwuZ2V0TW9kZWwoKSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGdvVG8oY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9nb1RvKGNvbnRyb2xsZXJOYW1lLCBjb250cm9sbGVyQWN0aW9uLCBwYXJhbXMpO1xuICB9XG59XG5cbi8qKlxuICogQ29tcG9uZW50IHRvIGJlIHNob3dlZCBpbiB2aWV3XG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaWV3Q29tcG9uZW50IHtcbiAgcHVibGljIHZpZXc6IFZpZXc7XG4gIHByb3RlY3RlZCBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50W10gPSBbXTtcblxuICBwdWJsaWMgY3JlYXRlKF9jb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyKTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVDb21wb25lbnQoY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlciwgdmlldzogVmlldyk6IHZvaWQge1xuICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgdGhpcy5jcmVhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlciwgdmlldyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbXBvbmVudCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50cykge1xuICAgICAgY29tcG9uZW50LnVwZGF0ZUNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgZ2FtZSgpOiBQaGFzZXIuR2FtZSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5nYW1lO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdmlldy50cyIsImltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyIH0gZnJvbSAnQHJlYWN0aXZleC9yeGpzJztcblxuZXhwb3J0IGNsYXNzIFdhdGNoTW9kZWw8VD4ge1xuICBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+O1xuICBvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD47XG4gIGdldE1vZGVsOiAoKSA9PiBUO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dhdGNoX21vZGVsLnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibG9kYXNoXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBCb2R5IGRlY29yYXRvclxuICpcbiAqIEBCb2R5XG4gKiBjbGFzcyBCYWxsIHtcbiAqIH1cbiAqXG4gKiB3aWxsIGFkZCB4IGFuZCB5LCBhbmQgd2lsbCBiZSB1cGRhdGVkIGJ5IGdhbWUgd29ybGRcbiAqL1xuXG5pbXBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBCb2R5PFQgZXh0ZW5kcyB7bmV3KC4uLmFyZ3M6YW55W10pOnt9fT4odGFyZ2V0OlQpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldC5wcm90b3R5cGUsICd4Jywge1xuICAgIGdldCAodGhpczogYW55KSB7XG4gICAgICByZXR1cm4gdGhpcy5fYm9keS54O1xuICAgIH0sXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCAneScsIHtcbiAgICBnZXQgKHRoaXM6IGFueSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2JvZHkueTtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4gY2xhc3MgZXh0ZW5kcyB0YXJnZXQge1xuICAgIF9ib2R5OiBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5O1xuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3M6YW55W10pe1xuICAgICAgc3VwZXIoYXJncyk7XG4gICAgICBCb290c3RyYXAub25Jbml0LnN1YnNjcmliZSgoYm9vdHN0cmFwOiBCb290c3RyYXApID0+IHtcbiAgICAgICAgdGhpcy5fYm9keSA9IGJvb3RzdHJhcC5jcmVhdGVCb2R5KCg8YW55PnRoaXMpWydwaHlzaWNzJ10pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9keS50cyJdLCJzb3VyY2VSb290IjoiIn0=