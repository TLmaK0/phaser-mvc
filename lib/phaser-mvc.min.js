(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Phaser = __webpack_require__(4);
var rxjs_1 = __webpack_require__(1);
var guid_1 = __webpack_require__(5);
/** Bootstrap for the phaser-mvc.
 * Useage:
 * import { FrameController } from 'phaser-mvc';
 * import { LandEditorController } from 'phaser-mvc';
 * window.onload = () => {
 * const boot = new Bootstrap();
 * boot.addController('FrameController', FrameController);
 */
var Bootstrap = /** @class */ (function () {
    function Bootstrap(width, height, worldMaterialOptions) {
        if (width === void 0) { width = 1920; }
        if (height === void 0) { height = 1080; }
        var _this = this;
        this.width = width;
        this.height = height;
        this.controllers = {};
        this.worldMaterialOptions = {
            restitution: 0
        };
        this.preload = function () {
            for (var _i = 0, _a = Bootstrap.preloadComponents; _i < _a.length; _i++) {
                var preload = _a[_i];
                preload(_this.game);
            }
        };
        this.create = function () {
            _this.worldCustomizations();
            _this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            _this.goTo(_this.startAction[0], _this.startAction[1], _this.startAction[2]);
            Bootstrap.onInit.next(_this);
            Bootstrap.onInit.complete();
        };
        this.materialsAndOptions = [];
        this.update = function () {
            for (var _i = 0, _a = Object.keys(_this.controllers); _i < _a.length; _i++) {
                var controllerName = _a[_i];
                _this.updateController(_this.controllers[controllerName]);
            }
        };
        if (worldMaterialOptions)
            this.worldMaterialOptions = worldMaterialOptions;
    }
    Bootstrap.preload = function (preload) {
        Bootstrap.preloadComponents.push(preload);
    };
    Bootstrap.prototype.start = function (controllerName, controllerAction, params) {
        this.startAction = [controllerName, controllerAction, params];
        this.game = new Phaser.Game(this.width, this.height, Phaser.CANVAS, 'content', { preload: this.preload,
            create: this.create,
            update: this.update });
    };
    Bootstrap.prototype.worldCustomizations = function () {
        this.game.physics.startSystem(Phaser.Physics.P2JS);
        var worldMaterial = this.game.physics.p2.createMaterial('worldMaterial');
        this.materialsAndOptions.push([worldMaterial, this.worldMaterialOptions]);
        this.game.physics.p2.setWorldMaterial(worldMaterial, true, true, true, true);
        this.game.physics.p2.gravity.y = 100;
    };
    Bootstrap.prototype.createBody = function (physicBody) {
        var body = new Phaser.Physics.P2.Body(this.game, this.game.add.sprite(0, 0, null), physicBody.x, physicBody.y, physicBody.mass);
        body.velocity.x = physicBody.velocity[0];
        body.velocity.y = physicBody.velocity[1];
        body.angle = physicBody.angle;
        var material = this.game.physics.p2.createMaterial(guid_1.Guid.newGuid(), body);
        var bodyOptions = physicBody.getPhysicsConfiguration();
        for (var _i = 0, _a = this.materialsAndOptions; _i < _a.length; _i++) {
            var materialAndOptions = _a[_i];
            this.generateContacts(material, bodyOptions.material, materialAndOptions[0], materialAndOptions[1]);
        }
        this.materialsAndOptions.push([material, bodyOptions.material]);
        return body;
    };
    Bootstrap.prototype.generateContacts = function (material1, options1, material2, options2) {
        var contactOptions = {};
        for (var key in options1) {
            contactOptions[key] = options1[key] + options2[key];
        }
        this.game.physics.p2.createContactMaterial(material1, material2, contactOptions);
    };
    Bootstrap.prototype.addController = function (name, controllerType) {
        if (this.controllers[name] != null)
            throw EvalError("Controller " + name + " already registered.");
        var controller = new controllerType();
        controller.bootstrap = this;
        this.controllers[name] = controller;
    };
    Bootstrap.prototype.goTo = function (controllerName, controllerAction, params) {
        /*tslint:disable:no-any*/
        var controller = this.controllers[controllerName];
        /*tslint:enable:no-any*/
        if (!controller) {
            throw EvalError("Controller " + controllerName + " not exist. Be sure you load it in bootstrap.");
        }
        /*tslint:disable:no-unsafe-any*/
        controller[controllerAction](params);
        /*tslint:enable:no-unsafe-any*/
    };
    Bootstrap.prototype.updateController = function (controller) {
        for (var _i = 0, _a = Object.keys(controller.views); _i < _a.length; _i++) {
            var viewName = _a[_i];
            controller.getView(viewName).updateView();
        }
    };
    Bootstrap.preloadComponents = [];
    Bootstrap.onInit = new rxjs_1.AsyncSubject();
    return Bootstrap;
}());
exports.Bootstrap = Bootstrap;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_model_1 = __webpack_require__(8);
var rxjs_1 = __webpack_require__(1);
var _ = __webpack_require__(9);
var WatchFactory = /** @class */ (function () {
    function WatchFactory() {
        this.watchsModel = [];
    }
    WatchFactory.prototype.create = function (getModel) {
        var watchModel = new watch_model_1.WatchModel();
        watchModel.observable = rxjs_1.Observable.create(function (observer) { return watchModel.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        watchModel.getModel = getModel;
        this.watchsModel.push(watchModel);
        return watchModel.observable;
    };
    return WatchFactory;
}());
exports.WatchFactory = WatchFactory;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
exports.Bootstrap = bootstrap_1.Bootstrap;
var controller_1 = __webpack_require__(6);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(7);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var watch_factory_1 = __webpack_require__(2);
exports.WatchFactory = watch_factory_1.WatchFactory;
var physic_body_1 = __webpack_require__(10);
exports.PhysicBody = physic_body_1.PhysicBody;


/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("phaser-ce");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Guid = /** @class */ (function () {
    function Guid() {
    }
    Guid.newGuid = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    return Guid;
}());
exports.Guid = Guid;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function () {
    function Controller() {
        var _this = this;
        this.views = {};
        this.model = {};
        this.goTo = function (controllerName, controllerAction, params) {
            _this.bootstrap.goTo(controllerName, controllerAction, params);
        };
    }
    Object.defineProperty(Controller.prototype, "game", {
        get: function () {
            return this.bootstrap.game;
        },
        enumerable: true,
        configurable: true
    });
    Controller.prototype.getView = function (viewName) {
        var view = this.views[viewName];
        if (view == null) {
            throw EvalError("View " + viewName + " not exist. Be sure you have added it to your controller.");
        }
        return view;
    };
    Controller.prototype.render = function (view) {
        view.init(this.game, this.model, this.goTo);
    };
    Controller.prototype.refresh = function (view) {
        view.refresh();
    };
    return Controller;
}());
exports.Controller = Controller;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_factory_1 = __webpack_require__(2);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function () {
    function View() {
        this.components = [];
        this.initiated = false;
        this.watchFactory = new watch_factory_1.WatchFactory();
    }
    View.prototype.refresh = function () {
        //empty, can be overrided or not
    };
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.preload = function () {
        //empty, can be overrided or not
    };
    View.prototype.update = function () {
        //empty, can be overrided or not
    };
    View.prototype.init = function (game, model, goTo) {
        if (!this.initiated) {
            this._game = game;
            this._model = model;
            this._goTo = goTo;
            this.createView();
            this.initiated = true;
        }
    };
    Object.defineProperty(View.prototype, "game", {
        get: function () { return this._game; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(View.prototype, "model", {
        get: function () { return this._model; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        var componentAdder = new ViewComponentAdder(this.components, this);
        this.create(componentAdder);
        this.updateOnModelChange(this.watchFactory);
    };
    View.prototype.updateView = function () {
        if (!this.initiated)
            return;
        this.checkWatchModels();
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    View.prototype.refreshView = function () {
        if (!this.initiated)
            throw EvalError('View is not rendered please render it before refresh.');
        this.refresh();
    };
    View.prototype.updateOnModelChange = function (_watchFactory) {
        //this should be overrided or not
    };
    View.prototype.checkWatchModels = function () {
        for (var _i = 0, _a = this.watchFactory.watchsModel; _i < _a.length; _i++) {
            var watchModel = _a[_i];
            watchModel.observer.next(watchModel.getModel());
        }
    };
    View.prototype.goTo = function (controllerName, controllerAction, params) {
        this._goTo(controllerName, controllerAction, params);
    };
    return View;
}());
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function () {
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    Object.defineProperty(ViewComponent.prototype, "game", {
        get: function () {
            return this.view.game;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WatchModel = /** @class */ (function () {
    function WatchModel() {
    }
    return WatchModel;
}());
exports.WatchModel = WatchModel;


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
var body_property_1 = __webpack_require__(11);
var PhysicBody = /** @class */ (function () {
    function PhysicBody() {
        this.x = 0;
        this.y = 0;
        this.angle = 0;
        this.velocity = [0, 0];
        this.mass = 1;
        this.physics = {};
        bootstrap_1.Bootstrap.onInit.subscribe(this.onBootstrapInit.bind(this));
    }
    PhysicBody.prototype.createBody = function (_body) {
    };
    PhysicBody.prototype.onBootstrapInit = function (bootstrap) {
        this.body = bootstrap.createBody(this);
        var propertyClass = this;
        for (var _i = 0, _a = propertyClass['bodyProperties']; _i < _a.length; _i++) {
            var property = _a[_i];
            propertyClass['get' + property] = propertyClass['getBody' + property];
            propertyClass['set' + property] = propertyClass['setBody' + property];
        }
        this.createBody(this.body);
    };
    PhysicBody.prototype.getPhysicsConfiguration = function () {
        return this.physics;
    };
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "x", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "y", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "angle", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "velocity", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "mass", void 0);
    return PhysicBody;
}());
exports.PhysicBody = PhysicBody;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function BodyProperty(target, key) {
    if (!target['bodyProperties'])
        target['bodyProperties'] = [];
    var privateKey = "_" + key;
    var upperKey = key.toUpperCase();
    var getKey = "get" + upperKey;
    var setKey = "set" + upperKey;
    var getBodyKey = "getBody" + upperKey;
    var setBodyKey = "setBody" + upperKey;
    target[getKey] = function () {
        return this[privateKey];
    };
    target[setKey] = function (value) {
        this[privateKey] = value;
    };
    target[getBodyKey] = function () {
        return this['body'][key];
    };
    target[setBodyKey] = function (value) {
        this['body'][key] = value;
    };
    function getter() {
        return this[getKey]();
    }
    function setter(value) {
        this[setKey](value);
    }
    Object.defineProperty(target, key, {
        get: getter,
        set: setter,
        enumerable: true,
        configurable: true
    });
    target['bodyProperties'].push(upperKey);
}
exports.BodyProperty = BodyProperty;


/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNGRiNTMzM2Q2ODFmYjBmMTVlNGMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jvb3RzdHJhcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvd2F0Y2hfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGhhc2VyLWNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2d1aWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dhdGNoX21vZGVsLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy8uL3NyYy9waHlzaWNfYm9keS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYm9keV9wcm9wZXJ0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQzdEQTtHQUNHOztBQUVILG9DQUFvQztBQUNwQyxvQ0FBK0M7QUFNL0Msb0NBQThCO0FBRTlCOzs7Ozs7O0dBT0c7QUFFSDtJQWFFLG1CQUEw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Q0FBQztJQUVEO1FBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxnQkFBZ0IsS0FBVTtRQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEIsQ0FBQztJQUVELE1BQU0sQ0FBQyxjQUFjLENBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNsQyxHQUFHLEVBQUUsTUFBTTtRQUNYLEdBQUcsRUFBRSxNQUFNO1FBQ1gsVUFBVSxFQUFFLElBQUk7UUFDaEIsWUFBWSxFQUFFLElBQUk7S0FDbkIsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFDLENBQUM7QUExQ0Qsb0NBMENDIiwiZmlsZSI6InBoYXNlci1tdmMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNGRiNTMzM2Q2ODFmYjBmMTVlNGMiLCIvKipcbiAqL1xuXG5pbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAncGhhc2VyLWNlJztcbmltcG9ydCB7IEFzeW5jU3ViamVjdCB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5cbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgSUFjdGlvblBhcmFtcyB9IGZyb20gJy4vaV9hY3Rpb25fcGFyYW1zJztcbmltcG9ydCB7IElDb250cm9sbGVyTWFwIH0gZnJvbSAnLi9pX2NvbnRyb2xsZXJfbWFwJztcbmltcG9ydCB7IFBoeXNpY0JvZHkgfSBmcm9tICcuL3BoeXNpY19ib2R5JztcbmltcG9ydCB7IEd1aWQgfSBmcm9tICcuL2d1aWQnO1xuXG4vKiogQm9vdHN0cmFwIGZvciB0aGUgcGhhc2VyLW12Yy5cbiAqIFVzZWFnZTpcbiAqIGltcG9ydCB7IEZyYW1lQ29udHJvbGxlciB9IGZyb20gJ3BoYXNlci1tdmMnO1xuICogaW1wb3J0IHsgTGFuZEVkaXRvckNvbnRyb2xsZXIgfSBmcm9tICdwaGFzZXItbXZjJztcbiAqIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gKiBjb25zdCBib290ID0gbmV3IEJvb3RzdHJhcCgpO1xuICogYm9vdC5hZGRDb250cm9sbGVyKCdGcmFtZUNvbnRyb2xsZXInLCBGcmFtZUNvbnRyb2xsZXIpO1xuICovXG5cbmV4cG9ydCBjbGFzcyBCb290c3RyYXAge1xuICBwcml2YXRlIHN0YXRpYyBwcmVsb2FkQ29tcG9uZW50czogKChnYW1lOiBQaGFzZXIuR2FtZSkgPT4gdm9pZClbXSA9IFtdO1xuXG4gIHB1YmxpYyBnYW1lOiBQaGFzZXIuR2FtZTtcbiAgcHJvdGVjdGVkIGNvbnRyb2xsZXJzOiBJQ29udHJvbGxlck1hcCA9IHt9O1xuICBwcml2YXRlIHN0YXJ0QWN0aW9uOiBbc3RyaW5nLCBzdHJpbmcsIElBY3Rpb25QYXJhbXNdO1xuICBwcml2YXRlIHdvcmxkTWF0ZXJpYWxPcHRpb25zOiBhbnkgPSB7XG4gICAgcmVzdGl0dXRpb246IDBcbiAgfTtcblxuXG4gIHB1YmxpYyBzdGF0aWMgb25Jbml0OiBBc3luY1N1YmplY3Q8Qm9vdHN0cmFwPiA9IG5ldyBBc3luY1N1YmplY3Q8Qm9vdHN0cmFwPigpO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgd2lkdGg6IG51bWJlciA9IDE5MjAsIHB1YmxpYyBoZWlnaHQ6IG51bWJlciA9IDEwODAsIHdvcmxkTWF0ZXJpYWxPcHRpb25zPzogYW55KXtcbiAgICBpZiAod29ybGRNYXRlcmlhbE9wdGlvbnMpIHRoaXMud29ybGRNYXRlcmlhbE9wdGlvbnMgPSB3b3JsZE1hdGVyaWFsT3B0aW9ucztcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgcHJlbG9hZChwcmVsb2FkOiAoZ2FtZTogUGhhc2VyLkdhbWUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBCb290c3RyYXAucHJlbG9hZENvbXBvbmVudHMucHVzaChwcmVsb2FkKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnRBY3Rpb24gPSBbY29udHJvbGxlck5hbWUsIGNvbnRyb2xsZXJBY3Rpb24sIHBhcmFtc107XG4gICAgdGhpcy5nYW1lID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgdGhpcy53aWR0aCxcbiAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICAgUGhhc2VyLkNBTlZBUyxcbiAgICAgICdjb250ZW50JyxcbiAgICAgIHsgcHJlbG9hZDogdGhpcy5wcmVsb2FkLFxuICAgICAgICBjcmVhdGU6IHRoaXMuY3JlYXRlLFxuICAgICAgICB1cGRhdGU6IHRoaXMudXBkYXRlfSk7XG4gIH1cblxuICBwdWJsaWMgcHJlbG9hZCA9ICgpOiB2b2lkID0+IHtcbiAgICBmb3IgKGNvbnN0IHByZWxvYWQgb2YgQm9vdHN0cmFwLnByZWxvYWRDb21wb25lbnRzKSB7XG4gICAgICBwcmVsb2FkKHRoaXMuZ2FtZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNyZWF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLndvcmxkQ3VzdG9taXphdGlvbnMoKTtcblxuICAgIHRoaXMuZ2FtZS5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLlNIT1dfQUxMO1xuICAgIHRoaXMuZ29Ubyh0aGlzLnN0YXJ0QWN0aW9uWzBdLCB0aGlzLnN0YXJ0QWN0aW9uWzFdLCB0aGlzLnN0YXJ0QWN0aW9uWzJdKTtcblxuICAgIEJvb3RzdHJhcC5vbkluaXQubmV4dCh0aGlzKTtcbiAgICBCb290c3RyYXAub25Jbml0LmNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIG1hdGVyaWFsc0FuZE9wdGlvbnM6IEFycmF5PFtQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbCwgYW55XT4gPSBbXTtcblxuICBwcml2YXRlIHdvcmxkQ3VzdG9taXphdGlvbnMoKXtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5QMkpTKTtcbiAgICBjb25zdCB3b3JsZE1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoJ3dvcmxkTWF0ZXJpYWwnKTtcblxuICAgIHRoaXMubWF0ZXJpYWxzQW5kT3B0aW9ucy5wdXNoKFt3b3JsZE1hdGVyaWFsLCB0aGlzLndvcmxkTWF0ZXJpYWxPcHRpb25zXSk7XG5cbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5zZXRXb3JsZE1hdGVyaWFsKHdvcmxkTWF0ZXJpYWwsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmdyYXZpdHkueSA9IDEwMDtcblxuICB9XG5cblxuICBwdWJsaWMgY3JlYXRlQm9keShwaHlzaWNCb2R5OiBQaHlzaWNCb2R5KXtcbiAgICBjb25zdCBib2R5ID0gbmV3IFBoYXNlci5QaHlzaWNzLlAyLkJvZHkodGhpcy5nYW1lLCB0aGlzLmdhbWUuYWRkLnNwcml0ZSgwLDAsIG51bGwpLCBwaHlzaWNCb2R5LngsIHBoeXNpY0JvZHkueSwgcGh5c2ljQm9keS5tYXNzKTtcbiAgICBib2R5LnZlbG9jaXR5LnggPSBwaHlzaWNCb2R5LnZlbG9jaXR5WzBdO1xuICAgIGJvZHkudmVsb2NpdHkueSA9IHBoeXNpY0JvZHkudmVsb2NpdHlbMV07XG4gICAgYm9keS5hbmdsZSA9IHBoeXNpY0JvZHkuYW5nbGU7XG5cbiAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZU1hdGVyaWFsKEd1aWQubmV3R3VpZCgpLCBib2R5KTtcbiAgICBjb25zdCBib2R5T3B0aW9ucyA9IHBoeXNpY0JvZHkuZ2V0UGh5c2ljc0NvbmZpZ3VyYXRpb24oKTtcbiAgICBmb3IoY29uc3QgbWF0ZXJpYWxBbmRPcHRpb25zIG9mIHRoaXMubWF0ZXJpYWxzQW5kT3B0aW9ucyl7XG4gICAgICB0aGlzLmdlbmVyYXRlQ29udGFjdHMobWF0ZXJpYWwsIGJvZHlPcHRpb25zLm1hdGVyaWFsLCBtYXRlcmlhbEFuZE9wdGlvbnNbMF0sIG1hdGVyaWFsQW5kT3B0aW9uc1sxXSk7XG4gICAgfVxuXG4gICAgdGhpcy5tYXRlcmlhbHNBbmRPcHRpb25zLnB1c2goW21hdGVyaWFsLCBib2R5T3B0aW9ucy5tYXRlcmlhbF0pO1xuICAgIHJldHVybiBib2R5O1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnRhY3RzKG1hdGVyaWFsMTogUGhhc2VyLlBoeXNpY3MuUDIuTWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zMTogYW55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwyOiBQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMyOiBhbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKXtcbiAgICBsZXQgY29udGFjdE9wdGlvbnM6IGFueSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMxKXtcbiAgICAgIGNvbnRhY3RPcHRpb25zW2tleV0gPSBvcHRpb25zMVtrZXldICsgb3B0aW9uczJba2V5XTtcbiAgICB9XG5cbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5jcmVhdGVDb250YWN0TWF0ZXJpYWwobWF0ZXJpYWwxLCBtYXRlcmlhbDIsIGNvbnRhY3RPcHRpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCBjb250cm9sbGVyTmFtZSBvZiBPYmplY3Qua2V5cyh0aGlzLmNvbnRyb2xsZXJzKSkge1xuICAgICAgdGhpcy51cGRhdGVDb250cm9sbGVyKDxDb250cm9sbGVyPnRoaXMuY29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWRkQ29udHJvbGxlcjxUIGV4dGVuZHMgQ29udHJvbGxlcj4obmFtZTogc3RyaW5nLCBjb250cm9sbGVyVHlwZTogbmV3ICgpID0+IFQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb250cm9sbGVyc1tuYW1lXSAhPSBudWxsKSB0aHJvdyBFdmFsRXJyb3IoYENvbnRyb2xsZXIgJHtuYW1lfSBhbHJlYWR5IHJlZ2lzdGVyZWQuYCk7XG5cbiAgICBjb25zdCBjb250cm9sbGVyOiBUID0gbmV3IGNvbnRyb2xsZXJUeXBlKCk7XG4gICAgY29udHJvbGxlci5ib290c3RyYXAgPSB0aGlzO1xuICAgIHRoaXMuY29udHJvbGxlcnNbbmFtZV0gPSBjb250cm9sbGVyO1xuICB9XG5cbiAgcHVibGljIGdvVG8oY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpOiB2b2lkIHtcbiAgICAvKnRzbGludDpkaXNhYmxlOm5vLWFueSovXG4gICAgY29uc3QgY29udHJvbGxlcjogYW55ID0gdGhpcy5jb250cm9sbGVyc1tjb250cm9sbGVyTmFtZV07XG4gICAgLyp0c2xpbnQ6ZW5hYmxlOm5vLWFueSovXG4gICAgaWYgKCFjb250cm9sbGVyKSB7XG4gICAgICB0aHJvdyBFdmFsRXJyb3IoYENvbnRyb2xsZXIgJHtjb250cm9sbGVyTmFtZX0gbm90IGV4aXN0LiBCZSBzdXJlIHlvdSBsb2FkIGl0IGluIGJvb3RzdHJhcC5gKTtcbiAgICB9XG4gICAgLyp0c2xpbnQ6ZGlzYWJsZTpuby11bnNhZmUtYW55Ki9cbiAgICBjb250cm9sbGVyW2NvbnRyb2xsZXJBY3Rpb25dKHBhcmFtcyk7XG4gICAgLyp0c2xpbnQ6ZW5hYmxlOm5vLXVuc2FmZS1hbnkqL1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb250cm9sbGVyKGNvbnRyb2xsZXI6IENvbnRyb2xsZXIpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHZpZXdOYW1lIG9mIE9iamVjdC5rZXlzKGNvbnRyb2xsZXIudmlld3MpKSB7XG4gICAgICBjb250cm9sbGVyLmdldFZpZXcodmlld05hbWUpLnVwZGF0ZVZpZXcoKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ib290c3RyYXAudHMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAcmVhY3RpdmV4L3J4anNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIlxuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBXYXRjaE1vZGVsIH0gZnJvbSAnLi93YXRjaF9tb2RlbCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBjbGFzcyBXYXRjaEZhY3Rvcnkge1xuICBwdWJsaWMgd2F0Y2hzTW9kZWw6IFdhdGNoTW9kZWw8YW55PltdID0gW107XG5cbiAgY29uc3RydWN0b3IoKXtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGU8VD4oZ2V0TW9kZWw6ICgpID0+IFQpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICBjb25zdCB3YXRjaE1vZGVsID0gbmV3IFdhdGNoTW9kZWw8VD4oKTtcblxuICAgIHdhdGNoTW9kZWwub2JzZXJ2YWJsZSA9IE9ic2VydmFibGUuY3JlYXRlKFxuICAgICAgKG9ic2VydmVyOiBPYnNlcnZlcjwoKSA9PiBUPikgPT4gd2F0Y2hNb2RlbC5vYnNlcnZlciA9IG9ic2VydmVyXG4gICAgKS5tYXAoXG4gICAgICAobW9kZWw6IFQpID0+IF8uY2xvbmVEZWVwKG1vZGVsKVxuICAgICkuZGlzdGluY3RVbnRpbENoYW5nZWQoXG4gICAgICAocHJldjogVCwgbmV4dDogVCkgPT4gXy5pc0VxdWFsKHByZXYsIG5leHQpXG4gICAgKTtcblxuICAgIHdhdGNoTW9kZWwuZ2V0TW9kZWwgPSBnZXRNb2RlbDtcblxuICAgIHRoaXMud2F0Y2hzTW9kZWwucHVzaCh3YXRjaE1vZGVsKTsgXG5cbiAgICByZXR1cm4gd2F0Y2hNb2RlbC5vYnNlcnZhYmxlO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvd2F0Y2hfZmFjdG9yeS50cyIsImV4cG9ydCB7IEJvb3RzdHJhcCB9IGZyb20gJy4vYm9vdHN0cmFwJztcbmV4cG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuZXhwb3J0IHsgVmlldywgVmlld0NvbXBvbmVudCB9IGZyb20gJy4vdmlldyc7XG5leHBvcnQgeyBXYXRjaEZhY3RvcnkgfSBmcm9tICcuL3dhdGNoX2ZhY3RvcnknO1xuZXhwb3J0IHsgUGh5c2ljQm9keSB9IGZyb20gJy4vcGh5c2ljX2JvZHknO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGhhc2VyLWNlXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicGhhc2VyLWNlXCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0IGNsYXNzIEd1aWQge1xuICAgIHN0YXRpYyBuZXdHdWlkKCkge1xuICAgICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XG4gICAgICAgICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkqMTZ8MCwgdiA9IGMgPT0gJ3gnID8gciA6IChyJjB4M3wweDgpO1xuICAgICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZ3VpZC50cyIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXItY2UnO1xuXG5pbXBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5pbXBvcnQgeyBJQWN0aW9uUGFyYW1zIH0gZnJvbSAnLi9pX2FjdGlvbl9wYXJhbXMnO1xuaW1wb3J0IHsgSUNvbnRyb2xsZXJNYXAgfSBmcm9tICcuL2lfY29udHJvbGxlcl9tYXAnO1xuaW1wb3J0IHsgSU1vZGVsIH0gZnJvbSAnLi9pX21vZGVsJztcbmltcG9ydCB7IElWaWV3TWFwIH0gZnJvbSAnLi9pX3ZpZXdfbWFwJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuXG4vKipcbiAqIENvbnRyb2xsZXIgYWNjZXB0cyBpbnB1dCBmcm9tIHZpZXcgYW5kIGNvbnZlcnRzIG1vZGlmaWVkcyB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgcHVibGljIHZpZXdzOiBJVmlld01hcCA9IHt9O1xuICBwdWJsaWMgYm9vdHN0cmFwOiBCb290c3RyYXA7XG4gIHB1YmxpYyBtb2RlbDogSU1vZGVsID0ge307XG5cbiAgcHVibGljIGdldCBnYW1lKCk6IFBoYXNlci5HYW1lIHtcbiAgICByZXR1cm4gdGhpcy5ib290c3RyYXAuZ2FtZTtcbiAgfVxuXG4gIHB1YmxpYyBnb1RvID0gKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKSA9PiB7XG4gICAgdGhpcy5ib290c3RyYXAuZ29Ubyhjb250cm9sbGVyTmFtZSwgY29udHJvbGxlckFjdGlvbiwgcGFyYW1zKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWaWV3KHZpZXdOYW1lOiBzdHJpbmcpOiBWaWV3IHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3c1t2aWV3TmFtZV07XG4gICAgaWYgKHZpZXcgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgRXZhbEVycm9yKGBWaWV3ICR7dmlld05hbWV9IG5vdCBleGlzdC4gQmUgc3VyZSB5b3UgaGF2ZSBhZGRlZCBpdCB0byB5b3VyIGNvbnRyb2xsZXIuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpZXc7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKHZpZXc6IFZpZXcpOiB2b2lkIHtcbiAgICB2aWV3LmluaXQodGhpcy5nYW1lLCB0aGlzLm1vZGVsLCB0aGlzLmdvVG8pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlZnJlc2godmlldzogVmlldyk6IHZvaWQge1xuICAgIHZpZXcucmVmcmVzaCgpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udHJvbGxlci50cyIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXItY2UnO1xuXG5pbXBvcnQgeyBJQWN0aW9uUGFyYW1zIH0gZnJvbSAnLi9pX2FjdGlvbl9wYXJhbXMnO1xuaW1wb3J0IHsgSU1vZGVsIH0gZnJvbSAnLi9pX21vZGVsJztcbmltcG9ydCB7IFdhdGNoTW9kZWwgfSBmcm9tICcuL3dhdGNoX21vZGVsJztcbmltcG9ydCB7IFdhdGNoRmFjdG9yeSB9IGZyb20gJy4vd2F0Y2hfZmFjdG9yeSc7XG5cbi8qKlxuICogQWRkcyBhIGNvbXBvbmVudCB0byB0aGUgdmlldyBhbmQgb3RoZXIgdmlldyBjb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3Q29tcG9uZW50QWRkZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbXBvbmVudHM6IFZpZXdDb21wb25lbnRbXSwgcHJpdmF0ZSB2aWV3OiBWaWV3KSB7fVxuXG4gIHB1YmxpYyBhZGRDb21wb25lbnQ8VCBleHRlbmRzIFZpZXdDb21wb25lbnQ+KGNvbXBvbmVudDogVCk6IFQge1xuICAgIHRoaXMuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgY29tcG9uZW50LmNyZWF0ZUNvbXBvbmVudCh0aGlzLCB0aGlzLnZpZXcpO1xuXG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxufVxuXG4vKipcbiAqIElucHV0IGFuZCBvdXB1dCBmb3IgdGhlIGFwcGxpY2F0aW9uXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaWV3IHtcbiAgcHJvdGVjdGVkIGNvbXBvbmVudHM6IFZpZXdDb21wb25lbnRbXSA9IFtdO1xuICBwcm90ZWN0ZWQgaW5pdGlhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2dhbWU6IFBoYXNlci5HYW1lO1xuICBwcml2YXRlIF9tb2RlbDogSU1vZGVsO1xuICBwcml2YXRlIF9nb1RvOiAoY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpID0+IHZvaWQ7XG4gIHByaXZhdGUgd2F0Y2hGYWN0b3J5OiBXYXRjaEZhY3RvcnkgPSBuZXcgV2F0Y2hGYWN0b3J5KCk7XG5cbiAgcHVibGljIHJlZnJlc2goKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuICBwdWJsaWMgY3JlYXRlKF9jb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuICBwdWJsaWMgcHJlbG9hZCgpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyB1cGRhdGUoKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBpbml0KGdhbWU6IFBoYXNlci5HYW1lLCBtb2RlbDogSU1vZGVsLCBnb1RvOiAoY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpID0+IHZvaWQpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdGVkKSB7XG4gICAgICB0aGlzLl9nYW1lID0gZ2FtZTtcbiAgICAgIHRoaXMuX21vZGVsID0gbW9kZWw7XG4gICAgICB0aGlzLl9nb1RvID0gZ29UbztcbiAgICAgIHRoaXMuY3JlYXRlVmlldygpO1xuICAgICAgdGhpcy5pbml0aWF0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGdldCBnYW1lKCk6IFBoYXNlci5HYW1lIHsgcmV0dXJuIHRoaXMuX2dhbWU7IH1cblxuICBnZXQgbW9kZWwoKTogSU1vZGVsIHsgcmV0dXJuIHRoaXMuX21vZGVsOyB9XG5cbiAgcHVibGljIGNyZWF0ZVZpZXcoKSB7XG4gICAgY29uc3QgY29tcG9uZW50QWRkZXIgPSBuZXcgVmlld0NvbXBvbmVudEFkZGVyKHRoaXMuY29tcG9uZW50cywgdGhpcyk7XG4gICAgdGhpcy5jcmVhdGUoY29tcG9uZW50QWRkZXIpO1xuICAgIHRoaXMudXBkYXRlT25Nb2RlbENoYW5nZSh0aGlzLndhdGNoRmFjdG9yeSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVmlldygpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdGVkKSByZXR1cm47XG4gICAgdGhpcy5jaGVja1dhdGNoTW9kZWxzKCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC51cGRhdGVDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaFZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYXRlZCkgdGhyb3cgRXZhbEVycm9yKCdWaWV3IGlzIG5vdCByZW5kZXJlZCBwbGVhc2UgcmVuZGVyIGl0IGJlZm9yZSByZWZyZXNoLicpO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZU9uTW9kZWxDaGFuZ2UoX3dhdGNoRmFjdG9yeTogV2F0Y2hGYWN0b3J5KXtcbiAgICAvL3RoaXMgc2hvdWxkIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tXYXRjaE1vZGVscygpe1xuICAgIGZvcihjb25zdCB3YXRjaE1vZGVsIG9mIHRoaXMud2F0Y2hGYWN0b3J5LndhdGNoc01vZGVsKXtcbiAgICAgIHdhdGNoTW9kZWwub2JzZXJ2ZXIubmV4dCh3YXRjaE1vZGVsLmdldE1vZGVsKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBnb1RvKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fZ29Ubyhjb250cm9sbGVyTmFtZSwgY29udHJvbGxlckFjdGlvbiwgcGFyYW1zKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBvbmVudCB0byBiZSBzaG93ZWQgaW4gdmlld1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlld0NvbXBvbmVudCB7XG4gIHB1YmxpYyB2aWV3OiBWaWV3O1xuICBwcm90ZWN0ZWQgY29tcG9uZW50czogVmlld0NvbXBvbmVudFtdID0gW107XG5cbiAgcHVibGljIGNyZWF0ZShfY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcik6IHZvaWQge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlQ29tcG9uZW50KGNvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXIsIHZpZXc6IFZpZXcpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgIHRoaXMuY3JlYXRlKGNvbXBvbmVudEFkZGVyKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQoY29tcG9uZW50QWRkZXIsIHZpZXcpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVDb21wb25lbnQoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC51cGRhdGVDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGdhbWUoKTogUGhhc2VyLkdhbWUge1xuICAgIHJldHVybiB0aGlzLnZpZXcuZ2FtZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ZpZXcudHMiLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5cbmV4cG9ydCBjbGFzcyBXYXRjaE1vZGVsPFQ+IHtcbiAgb2JzZXJ2YWJsZTogT2JzZXJ2YWJsZTxUPjtcbiAgb2JzZXJ2ZXI6IE9ic2VydmVyPCgpID0+IFQ+O1xuICBnZXRNb2RlbDogKCkgPT4gVDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93YXRjaF9tb2RlbC50cyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImxvZGFzaFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImxvZGFzaFwiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICovXG5cbmltcG9ydCB7IEJvb3RzdHJhcCB9IGZyb20gJy4vYm9vdHN0cmFwJztcbmltcG9ydCB7IEJvZHlQcm9wZXJ0eSB9IGZyb20gJy4vYm9keV9wcm9wZXJ0eSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQaHlzaWNCb2R5IHtcbiAgcHJpdmF0ZSBib2R5OiBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5O1xuXG4gIEBCb2R5UHJvcGVydHlcbiAgcHVibGljIHg6IG51bWJlciA9IDA7XG5cbiAgQEJvZHlQcm9wZXJ0eVxuICBwdWJsaWMgeTogbnVtYmVyID0gMDtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyBhbmdsZTogbnVtYmVyID0gMDtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyB2ZWxvY2l0eTogW251bWJlciwgbnVtYmVyXSA9IFswLCAwXTtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyBtYXNzOiBudW1iZXIgPSAxO1xuXG4gIHByb3RlY3RlZCBwaHlzaWNzOiBhbnkgPSB7fTtcblxuICBjb25zdHJ1Y3Rvcigpe1xuICAgIEJvb3RzdHJhcC5vbkluaXQuc3Vic2NyaWJlKHRoaXMub25Cb290c3RyYXBJbml0LmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUJvZHkoX2JvZHk6IFBoYXNlci5QaHlzaWNzLlAyLkJvZHkpe1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uQm9vdHN0cmFwSW5pdChib290c3RyYXA6IEJvb3RzdHJhcCl7XG4gICAgdGhpcy5ib2R5ID0gYm9vdHN0cmFwLmNyZWF0ZUJvZHkodGhpcyk7XG5cbiAgICBjb25zdCBwcm9wZXJ0eUNsYXNzID0gPGFueT50aGlzO1xuXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBwcm9wZXJ0eUNsYXNzWydib2R5UHJvcGVydGllcyddKXtcbiAgICAgIHByb3BlcnR5Q2xhc3NbJ2dldCcgKyBwcm9wZXJ0eV0gPSBwcm9wZXJ0eUNsYXNzWydnZXRCb2R5JyArIHByb3BlcnR5XTtcbiAgICAgIHByb3BlcnR5Q2xhc3NbJ3NldCcgKyBwcm9wZXJ0eV0gPSBwcm9wZXJ0eUNsYXNzWydzZXRCb2R5JyArIHByb3BlcnR5XTtcbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZUJvZHkodGhpcy5ib2R5KTtcbiAgfVxuXG5cbiAgcHVibGljIGdldFBoeXNpY3NDb25maWd1cmF0aW9uKCk6IGFueXtcbiAgICByZXR1cm4gdGhpcy5waHlzaWNzO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGh5c2ljX2JvZHkudHMiLCJleHBvcnQgZnVuY3Rpb24gQm9keVByb3BlcnR5KHRhcmdldDogYW55LCBrZXk6IHN0cmluZyl7XG4gIGlmICghdGFyZ2V0Wydib2R5UHJvcGVydGllcyddKSB0YXJnZXRbJ2JvZHlQcm9wZXJ0aWVzJ10gPSBbXTtcblxuICBjb25zdCBwcml2YXRlS2V5ID0gXCJfXCIgKyBrZXk7XG4gIGNvbnN0IHVwcGVyS2V5ID0ga2V5LnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IGdldEtleSA9IFwiZ2V0XCIgKyB1cHBlcktleTtcbiAgY29uc3Qgc2V0S2V5ID0gXCJzZXRcIiArIHVwcGVyS2V5O1xuICBjb25zdCBnZXRCb2R5S2V5ID0gXCJnZXRCb2R5XCIgKyB1cHBlcktleTtcbiAgY29uc3Qgc2V0Qm9keUtleSA9IFwic2V0Qm9keVwiICsgdXBwZXJLZXk7XG5cbiAgdGFyZ2V0W2dldEtleV0gPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzW3ByaXZhdGVLZXldO1xuICB9XG5cbiAgdGFyZ2V0W3NldEtleV0gPSBmdW5jdGlvbih2YWx1ZTogYW55KXtcbiAgICB0aGlzW3ByaXZhdGVLZXldID0gdmFsdWU7XG4gIH1cblxuICB0YXJnZXRbZ2V0Qm9keUtleV0gPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzWydib2R5J11ba2V5XTtcbiAgfVxuXG4gIHRhcmdldFtzZXRCb2R5S2V5XSA9IGZ1bmN0aW9uKHZhbHVlOiBhbnkpe1xuICAgIHRoaXNbJ2JvZHknXVtrZXldID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXR0ZXIoKXtcbiAgICByZXR1cm4gdGhpc1tnZXRLZXldKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR0ZXIodmFsdWU6IGFueSl7XG4gICAgdGhpc1tzZXRLZXldKHZhbHVlKTtcbiAgfVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGFyZ2V0LCBrZXksIHtcbiAgICBnZXQ6IGdldHRlcixcbiAgICBzZXQ6IHNldHRlcixcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcblxuICB0YXJnZXRbJ2JvZHlQcm9wZXJ0aWVzJ10ucHVzaCh1cHBlcktleSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9keV9wcm9wZXJ0eS50cyJdLCJzb3VyY2VSb290IjoiIn0=