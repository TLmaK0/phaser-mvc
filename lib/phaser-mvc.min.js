(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Phaser = __webpack_require__(4);
var rxjs_1 = __webpack_require__(1);
var guid_1 = __webpack_require__(5);
/** Bootstrap for the phaser-mvc.
 * Useage:
 * import { FrameController } from 'phaser-mvc';
 * import { LandEditorController } from 'phaser-mvc';
 * window.onload = () => {
 * const boot = new Bootstrap();
 * boot.addController('FrameController', FrameController);
 */
var Bootstrap = /** @class */ (function () {
    function Bootstrap(width, height) {
        if (width === void 0) { width = 1920; }
        if (height === void 0) { height = 1080; }
        var _this = this;
        this.width = width;
        this.height = height;
        this.controllers = {};
        this.preload = function () {
            for (var _i = 0, _a = Bootstrap.preloadComponents; _i < _a.length; _i++) {
                var preload = _a[_i];
                preload(_this.game);
            }
        };
        this.create = function () {
            _this.worldCustomizations();
            _this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            _this.goTo(_this.startAction[0], _this.startAction[1], _this.startAction[2]);
            Bootstrap.onInit.next(_this);
            Bootstrap.onInit.complete();
        };
        this.update = function () {
            for (var _i = 0, _a = Object.keys(_this.controllers); _i < _a.length; _i++) {
                var controllerName = _a[_i];
                _this.updateController(_this.controllers[controllerName]);
            }
        };
    }
    Bootstrap.preload = function (preload) {
        Bootstrap.preloadComponents.push(preload);
    };
    Bootstrap.prototype.start = function (controllerName, controllerAction, params) {
        this.startAction = [controllerName, controllerAction, params];
        this.game = new Phaser.Game(this.width, this.height, Phaser.CANVAS, 'content', { preload: this.preload,
            create: this.create,
            update: this.update });
    };
    Bootstrap.prototype.worldCustomizations = function () {
        this.game.physics.startSystem(Phaser.Physics.P2JS);
        this.worldMaterial = this.game.physics.p2.createMaterial('worldMaterial');
        Bootstrap.worldMaterialOptions = {
            restitution: 0
        };
        this.game.physics.p2.setWorldMaterial(this.worldMaterial, true, true, true, true);
        this.game.physics.p2.gravity.y = 100;
    };
    Bootstrap.prototype.createBody = function (body) {
        var physicBody = new Phaser.Physics.P2.Body(this.game, this.game.add.sprite(0, 0, null), body.x, body.y);
        var material = this.game.physics.p2.createMaterial(guid_1.Guid.newGuid(), physicBody);
        var options = body.getPhysicsConfiguration();
        this.generateContacts(material, options.material);
        return physicBody;
    };
    Bootstrap.prototype.generateContacts = function (material, options) {
        var contactOptions = {};
        for (var key in options) {
            contactOptions[key] = Bootstrap.worldMaterialOptions[key] + options[key];
        }
        var contactMaterial = this.game.physics.p2.createContactMaterial(material, this.worldMaterial, contactOptions);
    };
    Bootstrap.prototype.addController = function (name, controllerType) {
        if (this.controllers[name] != null)
            throw EvalError("Controller " + name + " already registered.");
        var controller = new controllerType();
        controller.bootstrap = this;
        this.controllers[name] = controller;
    };
    Bootstrap.prototype.goTo = function (controllerName, controllerAction, params) {
        /*tslint:disable:no-any*/
        var controller = this.controllers[controllerName];
        /*tslint:enable:no-any*/
        if (!controller) {
            throw EvalError("Controller " + controllerName + " not exist. Be sure you load it in bootstrap.");
        }
        /*tslint:disable:no-unsafe-any*/
        controller[controllerAction](params);
        /*tslint:enable:no-unsafe-any*/
    };
    Bootstrap.prototype.updateController = function (controller) {
        for (var _i = 0, _a = Object.keys(controller.views); _i < _a.length; _i++) {
            var viewName = _a[_i];
            controller.getView(viewName).updateView();
        }
    };
    Bootstrap.preloadComponents = [];
    Bootstrap.onInit = new rxjs_1.AsyncSubject();
    Bootstrap.worldMaterialOptions = {};
    return Bootstrap;
}());
exports.Bootstrap = Bootstrap;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_model_1 = __webpack_require__(8);
var rxjs_1 = __webpack_require__(1);
var _ = __webpack_require__(9);
var WatchFactory = /** @class */ (function () {
    function WatchFactory() {
        this.watchsModel = [];
    }
    WatchFactory.prototype.create = function (getModel) {
        var watchModel = new watch_model_1.WatchModel();
        watchModel.observable = rxjs_1.Observable.create(function (observer) { return watchModel.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        watchModel.getModel = getModel;
        this.watchsModel.push(watchModel);
        return watchModel.observable;
    };
    return WatchFactory;
}());
exports.WatchFactory = WatchFactory;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
exports.Bootstrap = bootstrap_1.Bootstrap;
var controller_1 = __webpack_require__(6);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(7);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var watch_factory_1 = __webpack_require__(2);
exports.WatchFactory = watch_factory_1.WatchFactory;
var physic_body_1 = __webpack_require__(10);
exports.PhysicBody = physic_body_1.PhysicBody;


/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("phaser-ce");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Guid = /** @class */ (function () {
    function Guid() {
    }
    Guid.newGuid = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    return Guid;
}());
exports.Guid = Guid;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function () {
    function Controller() {
        var _this = this;
        this.views = {};
        this.model = {};
        this.goTo = function (controllerName, controllerAction, params) {
            _this.bootstrap.goTo(controllerName, controllerAction, params);
        };
    }
    Object.defineProperty(Controller.prototype, "game", {
        get: function () {
            return this.bootstrap.game;
        },
        enumerable: true,
        configurable: true
    });
    Controller.prototype.getView = function (viewName) {
        var view = this.views[viewName];
        if (view == null) {
            throw EvalError("View " + viewName + " not exist. Be sure you have added it to your controller.");
        }
        return view;
    };
    Controller.prototype.render = function (view) {
        view.init(this.game, this.model, this.goTo);
    };
    Controller.prototype.refresh = function (view) {
        view.refresh();
    };
    return Controller;
}());
exports.Controller = Controller;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_factory_1 = __webpack_require__(2);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function () {
    function View() {
        this.components = [];
        this.initiated = false;
        this.watchFactory = new watch_factory_1.WatchFactory();
    }
    View.prototype.refresh = function () {
        //empty, can be overrided or not
    };
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.preload = function () {
        //empty, can be overrided or not
    };
    View.prototype.update = function () {
        //empty, can be overrided or not
    };
    View.prototype.init = function (game, model, goTo) {
        if (!this.initiated) {
            this._game = game;
            this._model = model;
            this._goTo = goTo;
            this.createView();
            this.initiated = true;
        }
    };
    Object.defineProperty(View.prototype, "game", {
        get: function () { return this._game; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(View.prototype, "model", {
        get: function () { return this._model; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        var componentAdder = new ViewComponentAdder(this.components, this);
        this.create(componentAdder);
        this.updateOnModelChange(this.watchFactory);
    };
    View.prototype.updateView = function () {
        if (!this.initiated)
            return;
        this.checkWatchModels();
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    View.prototype.refreshView = function () {
        if (!this.initiated)
            throw EvalError('View is not rendered please render it before refresh.');
        this.refresh();
    };
    View.prototype.updateOnModelChange = function (_watchFactory) {
        //this should be overrided or not
    };
    View.prototype.checkWatchModels = function () {
        for (var _i = 0, _a = this.watchFactory.watchsModel; _i < _a.length; _i++) {
            var watchModel = _a[_i];
            watchModel.observer.next(watchModel.getModel());
        }
    };
    View.prototype.goTo = function (controllerName, controllerAction, params) {
        this._goTo(controllerName, controllerAction, params);
    };
    return View;
}());
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function () {
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    Object.defineProperty(ViewComponent.prototype, "game", {
        get: function () {
            return this.view.game;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WatchModel = /** @class */ (function () {
    function WatchModel() {
    }
    return WatchModel;
}());
exports.WatchModel = WatchModel;


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
var PhysicBody = /** @class */ (function () {
    function PhysicBody() {
        var _this = this;
        this._x = 0;
        this._y = 0;
        this._angle = 0;
        this.getX = function () { return _this._x; };
        this.getY = function () { return _this._y; };
        this.getAngle = function () { return _this._angle; };
        this.setX = function (value) { return _this._x = value; };
        this.setY = function (value) { return _this._y = value; };
        this.setAngle = function (value) { return _this._angle = value; };
        this.physics = {};
        bootstrap_1.Bootstrap.onInit.subscribe(this.onBootstrapInit.bind(this));
    }
    PhysicBody.prototype.onBootstrapInit = function (bootstrap) {
        var _this = this;
        this.body = bootstrap.createBody(this);
        this.getX = function () { return _this.body.x; };
        this.getY = function () { return _this.body.y; };
        this.getAngle = function () { return _this.body.angle; };
        this.setX = function (value) { return _this.body.x = value; };
        this.setY = function (value) { return _this.body.y = value; };
        this.setAngle = function (value) { return _this.body.angle = value; };
    };
    PhysicBody.prototype.getPhysicsConfiguration = function () {
        return this.physics;
    };
    Object.defineProperty(PhysicBody.prototype, "angle", {
        get: function () {
            return this.getAngle();
        },
        set: function (value) {
            this.setAngle(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhysicBody.prototype, "x", {
        get: function () {
            return this.getX();
        },
        set: function (value) {
            this.setX(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhysicBody.prototype, "y", {
        get: function () {
            return this.getY();
        },
        set: function (value) {
            this.setY(value);
        },
        enumerable: true,
        configurable: true
    });
    return PhysicBody;
}());
exports.PhysicBody = PhysicBody;


/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDE0NmQzNWM2Yzc1M2Q2M2JmNDkiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jvb3RzdHJhcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvd2F0Y2hfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGhhc2VyLWNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2d1aWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dhdGNoX21vZGVsLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy8uL3NyYy9waHlzaWNfYm9keS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQzdEQTtHQUNHOztBQUVILG9DQUFvQztBQUNwQyxvQ0FBK0M7QUFNL0Msb0NBQThCO0FBRTlCOzs7Ozs7O0dBT0c7QUFFSDtJQVNFLG1CQUEwQixLQUFvQixFQUFTLE1BQXFCO1FBQWxELG9DQUFvQjtRQUFT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Q0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyQixDQUFDO2FBRUQsVUFBYSxLQUFhO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsQ0FBQzs7O09BSkE7SUFNRCxzQkFBVyx5QkFBQzthQUFaO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNyQixDQUFDO2FBRUQsVUFBYSxLQUFhO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsQ0FBQzs7O09BSkE7SUFLSCxpQkFBQztBQUFELENBQUM7QUEzRFksZ0NBQVUiLCJmaWxlIjoicGhhc2VyLW12Yy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0MTQ2ZDM1YzZjNzUzZDYzYmY0OSIsIi8qKlxuICovXG5cbmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXItY2UnO1xuaW1wb3J0IHsgQXN5bmNTdWJqZWN0IH0gZnJvbSAnQHJlYWN0aXZleC9yeGpzJztcblxuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgeyBJQWN0aW9uUGFyYW1zIH0gZnJvbSAnLi9pX2FjdGlvbl9wYXJhbXMnO1xuaW1wb3J0IHsgSUNvbnRyb2xsZXJNYXAgfSBmcm9tICcuL2lfY29udHJvbGxlcl9tYXAnO1xuaW1wb3J0IHsgUGh5c2ljQm9keSB9IGZyb20gJy4vcGh5c2ljX2JvZHknO1xuaW1wb3J0IHsgR3VpZCB9IGZyb20gJy4vZ3VpZCc7XG5cbi8qKiBCb290c3RyYXAgZm9yIHRoZSBwaGFzZXItbXZjLlxuICogVXNlYWdlOlxuICogaW1wb3J0IHsgRnJhbWVDb250cm9sbGVyIH0gZnJvbSAncGhhc2VyLW12Yyc7XG4gKiBpbXBvcnQgeyBMYW5kRWRpdG9yQ29udHJvbGxlciB9IGZyb20gJ3BoYXNlci1tdmMnO1xuICogd2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAqIGNvbnN0IGJvb3QgPSBuZXcgQm9vdHN0cmFwKCk7XG4gKiBib290LmFkZENvbnRyb2xsZXIoJ0ZyYW1lQ29udHJvbGxlcicsIEZyYW1lQ29udHJvbGxlcik7XG4gKi9cblxuZXhwb3J0IGNsYXNzIEJvb3RzdHJhcCB7XG4gIHByaXZhdGUgc3RhdGljIHByZWxvYWRDb21wb25lbnRzOiAoKGdhbWU6IFBoYXNlci5HYW1lKSA9PiB2b2lkKVtdID0gW107XG5cbiAgcHVibGljIGdhbWU6IFBoYXNlci5HYW1lO1xuICBwcm90ZWN0ZWQgY29udHJvbGxlcnM6IElDb250cm9sbGVyTWFwID0ge307XG4gIHByaXZhdGUgc3RhcnRBY3Rpb246IFtzdHJpbmcsIHN0cmluZywgSUFjdGlvblBhcmFtc107XG5cbiAgcHVibGljIHN0YXRpYyBvbkluaXQ6IEFzeW5jU3ViamVjdDxCb290c3RyYXA+ID0gbmV3IEFzeW5jU3ViamVjdDxCb290c3RyYXA+KCk7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHB1YmxpYyB3aWR0aDogbnVtYmVyID0gMTkyMCwgcHVibGljIGhlaWdodDogbnVtYmVyID0gMTA4MCl7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHByZWxvYWQocHJlbG9hZDogKGdhbWU6IFBoYXNlci5HYW1lKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgQm9vdHN0cmFwLnByZWxvYWRDb21wb25lbnRzLnB1c2gocHJlbG9hZCk7XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoY29udHJvbGxlck5hbWU6IHN0cmluZywgY29udHJvbGxlckFjdGlvbjogc3RyaW5nLCBwYXJhbXM6IElBY3Rpb25QYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXJ0QWN0aW9uID0gW2NvbnRyb2xsZXJOYW1lLCBjb250cm9sbGVyQWN0aW9uLCBwYXJhbXNdO1xuICAgIHRoaXMuZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZShcbiAgICAgIHRoaXMud2lkdGgsXG4gICAgICB0aGlzLmhlaWdodCxcbiAgICAgIFBoYXNlci5DQU5WQVMsXG4gICAgICAnY29udGVudCcsXG4gICAgICB7IHByZWxvYWQ6IHRoaXMucHJlbG9hZCxcbiAgICAgICAgY3JlYXRlOiB0aGlzLmNyZWF0ZSxcbiAgICAgICAgdXBkYXRlOiB0aGlzLnVwZGF0ZX0pO1xuICB9XG5cbiAgcHVibGljIHByZWxvYWQgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCBwcmVsb2FkIG9mIEJvb3RzdHJhcC5wcmVsb2FkQ29tcG9uZW50cykge1xuICAgICAgcHJlbG9hZCh0aGlzLmdhbWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGUgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy53b3JsZEN1c3RvbWl6YXRpb25zKCk7XG5cbiAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICB0aGlzLmdvVG8odGhpcy5zdGFydEFjdGlvblswXSwgdGhpcy5zdGFydEFjdGlvblsxXSwgdGhpcy5zdGFydEFjdGlvblsyXSk7XG5cbiAgICBCb290c3RyYXAub25Jbml0Lm5leHQodGhpcyk7XG4gICAgQm9vdHN0cmFwLm9uSW5pdC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB3b3JsZE1hdGVyaWFsOiBQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbDtcbiAgcHVibGljIHN0YXRpYyB3b3JsZE1hdGVyaWFsT3B0aW9uczogYW55ID0ge307XG5cbiAgcHJpdmF0ZSB3b3JsZEN1c3RvbWl6YXRpb25zKCl7XG4gICAgdGhpcy5nYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuUDJKUyk7XG4gICAgdGhpcy53b3JsZE1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoJ3dvcmxkTWF0ZXJpYWwnKTtcbiAgICBCb290c3RyYXAud29ybGRNYXRlcmlhbE9wdGlvbnMgPSB7XG4gICAgICByZXN0aXR1dGlvbjogMFxuICAgIH07XG5cbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5zZXRXb3JsZE1hdGVyaWFsKHRoaXMud29ybGRNYXRlcmlhbCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5nYW1lLnBoeXNpY3MucDIuZ3Jhdml0eS55ID0gMTAwO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUJvZHkoYm9keTogUGh5c2ljQm9keSl7XG4gICAgY29uc3QgcGh5c2ljQm9keSA9IG5ldyBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5KHRoaXMuZ2FtZSwgdGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCBudWxsKSwgYm9keS54LCBib2R5LnkpO1xuICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoR3VpZC5uZXdHdWlkKCksIHBoeXNpY0JvZHkpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBib2R5LmdldFBoeXNpY3NDb25maWd1cmF0aW9uKCk7XG5cbiAgICB0aGlzLmdlbmVyYXRlQ29udGFjdHMobWF0ZXJpYWwsIG9wdGlvbnMubWF0ZXJpYWwpO1xuICAgIHJldHVybiBwaHlzaWNCb2R5O1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnRhY3RzKG1hdGVyaWFsOiBQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbCwgb3B0aW9uczogYW55KXtcbiAgICBsZXQgY29udGFjdE9wdGlvbnM6IGFueSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpe1xuICAgICAgY29udGFjdE9wdGlvbnNba2V5XSA9IEJvb3RzdHJhcC53b3JsZE1hdGVyaWFsT3B0aW9uc1trZXldICsgb3B0aW9uc1trZXldO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhY3RNYXRlcmlhbCA9IHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUNvbnRhY3RNYXRlcmlhbChtYXRlcmlhbCwgdGhpcy53b3JsZE1hdGVyaWFsLCBjb250YWN0T3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgY29udHJvbGxlck5hbWUgb2YgT2JqZWN0LmtleXModGhpcy5jb250cm9sbGVycykpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbGxlcig8Q29udHJvbGxlcj50aGlzLmNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFkZENvbnRyb2xsZXI8VCBleHRlbmRzIENvbnRyb2xsZXI+KG5hbWU6IHN0cmluZywgY29udHJvbGxlclR5cGU6IG5ldyAoKSA9PiBUKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29udHJvbGxlcnNbbmFtZV0gIT0gbnVsbCkgdGhyb3cgRXZhbEVycm9yKGBDb250cm9sbGVyICR7bmFtZX0gYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuXG4gICAgY29uc3QgY29udHJvbGxlcjogVCA9IG5ldyBjb250cm9sbGVyVHlwZSgpO1xuICAgIGNvbnRyb2xsZXIuYm9vdHN0cmFwID0gdGhpcztcbiAgICB0aGlzLmNvbnRyb2xsZXJzW25hbWVdID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBnb1RvKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKTogdm9pZCB7XG4gICAgLyp0c2xpbnQ6ZGlzYWJsZTpuby1hbnkqL1xuICAgIGNvbnN0IGNvbnRyb2xsZXI6IGFueSA9IHRoaXMuY29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdO1xuICAgIC8qdHNsaW50OmVuYWJsZTpuby1hbnkqL1xuICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgdGhyb3cgRXZhbEVycm9yKGBDb250cm9sbGVyICR7Y29udHJvbGxlck5hbWV9IG5vdCBleGlzdC4gQmUgc3VyZSB5b3UgbG9hZCBpdCBpbiBib290c3RyYXAuYCk7XG4gICAgfVxuICAgIC8qdHNsaW50OmRpc2FibGU6bm8tdW5zYWZlLWFueSovXG4gICAgY29udHJvbGxlcltjb250cm9sbGVyQWN0aW9uXShwYXJhbXMpO1xuICAgIC8qdHNsaW50OmVuYWJsZTpuby11bnNhZmUtYW55Ki9cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ29udHJvbGxlcihjb250cm9sbGVyOiBDb250cm9sbGVyKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCB2aWV3TmFtZSBvZiBPYmplY3Qua2V5cyhjb250cm9sbGVyLnZpZXdzKSkge1xuICAgICAgY29udHJvbGxlci5nZXRWaWV3KHZpZXdOYW1lKS51cGRhdGVWaWV3KCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9vdHN0cmFwLnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQHJlYWN0aXZleC9yeGpzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHJlYWN0aXZleC9yeGpzXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgV2F0Y2hNb2RlbCB9IGZyb20gJy4vd2F0Y2hfbW9kZWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgV2F0Y2hGYWN0b3J5IHtcbiAgcHVibGljIHdhdGNoc01vZGVsOiBXYXRjaE1vZGVsPGFueT5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCl7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlPFQ+KGdldE1vZGVsOiAoKSA9PiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3Qgd2F0Y2hNb2RlbCA9IG5ldyBXYXRjaE1vZGVsPFQ+KCk7XG5cbiAgICB3YXRjaE1vZGVsLm9ic2VydmFibGUgPSBPYnNlcnZhYmxlLmNyZWF0ZShcbiAgICAgIChvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD4pID0+IHdhdGNoTW9kZWwub2JzZXJ2ZXIgPSBvYnNlcnZlclxuICAgICkubWFwKFxuICAgICAgKG1vZGVsOiBUKSA9PiBfLmNsb25lRGVlcChtb2RlbClcbiAgICApLmRpc3RpbmN0VW50aWxDaGFuZ2VkKFxuICAgICAgKHByZXY6IFQsIG5leHQ6IFQpID0+IF8uaXNFcXVhbChwcmV2LCBuZXh0KVxuICAgICk7XG5cbiAgICB3YXRjaE1vZGVsLmdldE1vZGVsID0gZ2V0TW9kZWw7XG5cbiAgICB0aGlzLndhdGNoc01vZGVsLnB1c2god2F0Y2hNb2RlbCk7IFxuXG4gICAgcmV0dXJuIHdhdGNoTW9kZWwub2JzZXJ2YWJsZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dhdGNoX2ZhY3RvcnkudHMiLCJleHBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5leHBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmV4cG9ydCB7IFZpZXcsIFZpZXdDb21wb25lbnQgfSBmcm9tICcuL3ZpZXcnO1xuZXhwb3J0IHsgV2F0Y2hGYWN0b3J5IH0gZnJvbSAnLi93YXRjaF9mYWN0b3J5JztcbmV4cG9ydCB7IFBoeXNpY0JvZHkgfSBmcm9tICcuL3BoeXNpY19ib2R5JztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50cyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBoYXNlci1jZVwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInBoYXNlci1jZVwiXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydCBjbGFzcyBHdWlkIHtcbiAgICBzdGF0aWMgbmV3R3VpZCgpIHtcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpKjE2fDAsIHYgPSBjID09ICd4JyA/IHIgOiAociYweDN8MHg4KTtcbiAgICAgICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2d1aWQudHMiLCJpbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAncGhhc2VyLWNlJztcblxuaW1wb3J0IHsgQm9vdHN0cmFwIH0gZnJvbSAnLi9ib290c3RyYXAnO1xuaW1wb3J0IHsgSUFjdGlvblBhcmFtcyB9IGZyb20gJy4vaV9hY3Rpb25fcGFyYW1zJztcbmltcG9ydCB7IElDb250cm9sbGVyTWFwIH0gZnJvbSAnLi9pX2NvbnRyb2xsZXJfbWFwJztcbmltcG9ydCB7IElNb2RlbCB9IGZyb20gJy4vaV9tb2RlbCc7XG5pbXBvcnQgeyBJVmlld01hcCB9IGZyb20gJy4vaV92aWV3X21hcCc7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3JztcblxuLyoqXG4gKiBDb250cm9sbGVyIGFjY2VwdHMgaW5wdXQgZnJvbSB2aWV3IGFuZCBjb252ZXJ0cyBtb2RpZmllZHMgdGhlIG1vZGVsLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29udHJvbGxlciB7XG4gIHB1YmxpYyB2aWV3czogSVZpZXdNYXAgPSB7fTtcbiAgcHVibGljIGJvb3RzdHJhcDogQm9vdHN0cmFwO1xuICBwdWJsaWMgbW9kZWw6IElNb2RlbCA9IHt9O1xuXG4gIHB1YmxpYyBnZXQgZ2FtZSgpOiBQaGFzZXIuR2FtZSB7XG4gICAgcmV0dXJuIHRoaXMuYm9vdHN0cmFwLmdhbWU7XG4gIH1cblxuICBwdWJsaWMgZ29UbyA9IChjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcykgPT4ge1xuICAgIHRoaXMuYm9vdHN0cmFwLmdvVG8oY29udHJvbGxlck5hbWUsIGNvbnRyb2xsZXJBY3Rpb24sIHBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Vmlldyh2aWV3TmFtZTogc3RyaW5nKTogVmlldyB7XG4gICAgY29uc3QgdmlldyA9IHRoaXMudmlld3Nbdmlld05hbWVdO1xuICAgIGlmICh2aWV3ID09IG51bGwpIHtcbiAgICAgIHRocm93IEV2YWxFcnJvcihgVmlldyAke3ZpZXdOYW1lfSBub3QgZXhpc3QuIEJlIHN1cmUgeW91IGhhdmUgYWRkZWQgaXQgdG8geW91ciBjb250cm9sbGVyLmApO1xuICAgIH1cblxuICAgIHJldHVybiB2aWV3O1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcih2aWV3OiBWaWV3KTogdm9pZCB7XG4gICAgdmlldy5pbml0KHRoaXMuZ2FtZSwgdGhpcy5tb2RlbCwgdGhpcy5nb1RvKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWZyZXNoKHZpZXc6IFZpZXcpOiB2b2lkIHtcbiAgICB2aWV3LnJlZnJlc2goKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbnRyb2xsZXIudHMiLCJpbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAncGhhc2VyLWNlJztcblxuaW1wb3J0IHsgSUFjdGlvblBhcmFtcyB9IGZyb20gJy4vaV9hY3Rpb25fcGFyYW1zJztcbmltcG9ydCB7IElNb2RlbCB9IGZyb20gJy4vaV9tb2RlbCc7XG5pbXBvcnQgeyBXYXRjaE1vZGVsIH0gZnJvbSAnLi93YXRjaF9tb2RlbCc7XG5pbXBvcnQgeyBXYXRjaEZhY3RvcnkgfSBmcm9tICcuL3dhdGNoX2ZhY3RvcnknO1xuXG4vKipcbiAqIEFkZHMgYSBjb21wb25lbnQgdG8gdGhlIHZpZXcgYW5kIG90aGVyIHZpZXcgY29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgVmlld0NvbXBvbmVudEFkZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50W10sIHByaXZhdGUgdmlldzogVmlldykge31cblxuICBwdWJsaWMgYWRkQ29tcG9uZW50PFQgZXh0ZW5kcyBWaWV3Q29tcG9uZW50Pihjb21wb25lbnQ6IFQpOiBUIHtcbiAgICB0aGlzLmNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQodGhpcywgdGhpcy52aWV3KTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBJbnB1dCBhbmQgb3VwdXQgZm9yIHRoZSBhcHBsaWNhdGlvblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlldyB7XG4gIHByb3RlY3RlZCBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50W10gPSBbXTtcbiAgcHJvdGVjdGVkIGluaXRpYXRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9nYW1lOiBQaGFzZXIuR2FtZTtcbiAgcHJpdmF0ZSBfbW9kZWw6IElNb2RlbDtcbiAgcHJpdmF0ZSBfZ29UbzogKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKSA9PiB2b2lkO1xuICBwcml2YXRlIHdhdGNoRmFjdG9yeTogV2F0Y2hGYWN0b3J5ID0gbmV3IFdhdGNoRmFjdG9yeSgpO1xuXG4gIHB1YmxpYyByZWZyZXNoKCkge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cbiAgcHVibGljIGNyZWF0ZShfY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcikge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cbiAgcHVibGljIHByZWxvYWQoKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuICBwdWJsaWMgdXBkYXRlKCkge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwdWJsaWMgaW5pdChnYW1lOiBQaGFzZXIuR2FtZSwgbW9kZWw6IElNb2RlbCwgZ29UbzogKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXJBY3Rpb246IHN0cmluZywgcGFyYW1zOiBJQWN0aW9uUGFyYW1zKSA9PiB2b2lkKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYXRlZCkge1xuICAgICAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gICAgICB0aGlzLl9tb2RlbCA9IG1vZGVsO1xuICAgICAgdGhpcy5fZ29UbyA9IGdvVG87XG4gICAgICB0aGlzLmNyZWF0ZVZpZXcoKTtcbiAgICAgIHRoaXMuaW5pdGlhdGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBnZXQgZ2FtZSgpOiBQaGFzZXIuR2FtZSB7IHJldHVybiB0aGlzLl9nYW1lOyB9XG5cbiAgZ2V0IG1vZGVsKCk6IElNb2RlbCB7IHJldHVybiB0aGlzLl9tb2RlbDsgfVxuXG4gIHB1YmxpYyBjcmVhdGVWaWV3KCkge1xuICAgIGNvbnN0IGNvbXBvbmVudEFkZGVyID0gbmV3IFZpZXdDb21wb25lbnRBZGRlcih0aGlzLmNvbXBvbmVudHMsIHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlKGNvbXBvbmVudEFkZGVyKTtcbiAgICB0aGlzLnVwZGF0ZU9uTW9kZWxDaGFuZ2UodGhpcy53YXRjaEZhY3RvcnkpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYXRlZCkgcmV0dXJuO1xuICAgIHRoaXMuY2hlY2tXYXRjaE1vZGVscygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQudXBkYXRlQ29tcG9uZW50KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZnJlc2hWaWV3KCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0ZWQpIHRocm93IEV2YWxFcnJvcignVmlldyBpcyBub3QgcmVuZGVyZWQgcGxlYXNlIHJlbmRlciBpdCBiZWZvcmUgcmVmcmVzaC4nKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVPbk1vZGVsQ2hhbmdlKF93YXRjaEZhY3Rvcnk6IFdhdGNoRmFjdG9yeSl7XG4gICAgLy90aGlzIHNob3VsZCBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwcml2YXRlIGNoZWNrV2F0Y2hNb2RlbHMoKXtcbiAgICBmb3IoY29uc3Qgd2F0Y2hNb2RlbCBvZiB0aGlzLndhdGNoRmFjdG9yeS53YXRjaHNNb2RlbCl7XG4gICAgICB3YXRjaE1vZGVsLm9ic2VydmVyLm5leHQod2F0Y2hNb2RlbC5nZXRNb2RlbCgpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ29Ubyhjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyQWN0aW9uOiBzdHJpbmcsIHBhcmFtczogSUFjdGlvblBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX2dvVG8oY29udHJvbGxlck5hbWUsIGNvbnRyb2xsZXJBY3Rpb24sIHBhcmFtcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wb25lbnQgdG8gYmUgc2hvd2VkIGluIHZpZXdcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFZpZXdDb21wb25lbnQge1xuICBwdWJsaWMgdmlldzogVmlldztcbiAgcHJvdGVjdGVkIGNvbXBvbmVudHM6IFZpZXdDb21wb25lbnRbXSA9IFtdO1xuXG4gIHB1YmxpYyBjcmVhdGUoX2NvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXIpOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG5cbiAgcHVibGljIGNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyLCB2aWV3OiBWaWV3KTogdm9pZCB7XG4gICAgdGhpcy52aWV3ID0gdmlldztcbiAgICB0aGlzLmNyZWF0ZShjb21wb25lbnRBZGRlcik7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQuY3JlYXRlQ29tcG9uZW50KGNvbXBvbmVudEFkZGVyLCB2aWV3KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQ29tcG9uZW50KCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQudXBkYXRlQ29tcG9uZW50KCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBnYW1lKCk6IFBoYXNlci5HYW1lIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LmdhbWU7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy92aWV3LnRzIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuXG5leHBvcnQgY2xhc3MgV2F0Y2hNb2RlbDxUPiB7XG4gIG9ic2VydmFibGU6IE9ic2VydmFibGU8VD47XG4gIG9ic2VydmVyOiBPYnNlcnZlcjwoKSA9PiBUPjtcbiAgZ2V0TW9kZWw6ICgpID0+IFQ7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvd2F0Y2hfbW9kZWwudHMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJsb2Rhc2hcIlxuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqL1xuXG5pbXBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5cbmV4cG9ydCBjbGFzcyBQaHlzaWNCb2R5IHtcbiAgcHJpdmF0ZSBib2R5OiBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5O1xuICBwcml2YXRlIF94OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF95OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9hbmdsZTogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIGdldFggPSAoKSA9PiB0aGlzLl94O1xuICBwcml2YXRlIGdldFkgPSAoKSA9PiB0aGlzLl95O1xuICBwcml2YXRlIGdldEFuZ2xlID0gKCkgPT4gdGhpcy5fYW5nbGU7XG5cbiAgcHJpdmF0ZSBzZXRYID0gKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuX3ggPSB2YWx1ZTtcbiAgcHJpdmF0ZSBzZXRZID0gKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuX3kgPSB2YWx1ZTtcbiAgcHJpdmF0ZSBzZXRBbmdsZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLl9hbmdsZSA9IHZhbHVlO1xuXG4gIHByb3RlY3RlZCBwaHlzaWNzOiBhbnkgPSB7fTtcblxuICBjb25zdHJ1Y3Rvcigpe1xuICAgIEJvb3RzdHJhcC5vbkluaXQuc3Vic2NyaWJlKHRoaXMub25Cb290c3RyYXBJbml0LmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uQm9vdHN0cmFwSW5pdChib290c3RyYXA6IEJvb3RzdHJhcCl7XG4gICAgdGhpcy5ib2R5ID0gYm9vdHN0cmFwLmNyZWF0ZUJvZHkodGhpcyk7XG5cbiAgICB0aGlzLmdldFggPSAoKSA9PiB0aGlzLmJvZHkueDtcbiAgICB0aGlzLmdldFkgPSAoKSA9PiB0aGlzLmJvZHkueTtcbiAgICB0aGlzLmdldEFuZ2xlID0gKCkgPT4gdGhpcy5ib2R5LmFuZ2xlO1xuXG4gICAgdGhpcy5zZXRYID0gKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuYm9keS54ID0gdmFsdWU7XG4gICAgdGhpcy5zZXRZID0gKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuYm9keS55ID0gdmFsdWU7XG4gICAgdGhpcy5zZXRBbmdsZSA9ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLmJvZHkuYW5nbGUgPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRQaHlzaWNzQ29uZmlndXJhdGlvbigpOiBhbnl7XG4gICAgcmV0dXJuIHRoaXMucGh5c2ljcztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYW5nbGUoKTogbnVtYmVye1xuICAgIHJldHVybiB0aGlzLmdldEFuZ2xlKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFuZ2xlKHZhbHVlOiBudW1iZXIpe1xuICAgIHRoaXMuc2V0QW5nbGUodmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGdldCB4KCk6IG51bWJlcntcbiAgICByZXR1cm4gdGhpcy5nZXRYKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0IHgodmFsdWU6IG51bWJlcil7XG4gICAgdGhpcy5zZXRYKHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgeSgpOiBudW1iZXJ7XG4gICAgcmV0dXJuIHRoaXMuZ2V0WSgpO1xuICB9XG5cbiAgcHVibGljIHNldCB5KHZhbHVlOiBudW1iZXIpe1xuICAgIHRoaXMuc2V0WSh2YWx1ZSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9waHlzaWNfYm9keS50cyJdLCJzb3VyY2VSb290IjoiIn0=