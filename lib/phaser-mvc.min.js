(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
Object.defineProperty(exports, "__esModule", { value: true });
var Phaser = __webpack_require__(4);
var rxjs_1 = __webpack_require__(1);
var guid_1 = __webpack_require__(5);
var Bootstrap = /** @class */ (function () {
    function Bootstrap() {
        var _this = this;
        this.views = [];
        this.preload = function () {
            for (var _i = 0, _a = Bootstrap.preloadComponents; _i < _a.length; _i++) {
                var preload = _a[_i];
                preload(_this.game);
            }
        };
        this.create = function () {
            _this.worldCustomizations();
            _this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            _this.defaultAction();
            Bootstrap.onInit.next(_this);
            Bootstrap.onInit.complete();
        };
        this.update = function () {
            _this.updateViews();
        };
        this.materialsAndOptions = [];
    }
    Object.defineProperty(Bootstrap, "instance", {
        get: function () {
            return this._instance || (this._instance = new this());
        },
        enumerable: true,
        configurable: true
    });
    Bootstrap.preload = function (preload) {
        Bootstrap.preloadComponents.push(preload);
    };
    Bootstrap.run = function (defaultAction) {
        Bootstrap.instance.defaultAction = defaultAction;
        Bootstrap.instance.startEngines();
    };
    Bootstrap.prototype.startEngines = function () {
        this.game = new Phaser.Game(Bootstrap.worldConfiguration.bounds.width, Bootstrap.worldConfiguration.bounds.height, Phaser.CANVAS, 'content', { preload: this.preload,
            create: this.create,
            update: this.update });
    };
    Bootstrap.prototype.registerView = function (view) {
        this.views.push(view);
    };
    Bootstrap.prototype.updateViews = function () {
        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {
            var view = _a[_i];
            view.updateView();
        }
    };
    Bootstrap.prototype.worldCustomizations = function () {
        this.game.physics.startSystem(Phaser.Physics.P2JS);
        var worldMaterial = this.game.physics.p2.createMaterial('worldMaterial');
        this.materialsAndOptions.push([worldMaterial, Bootstrap.worldConfiguration.material]);
        this.game.physics.p2.setWorldMaterial(worldMaterial, true, true, true, true);
        this.game.physics.p2.gravity.y = 100;
    };
    Bootstrap.prototype.createBody = function (physicBody) {
        var sprite = this.game.add.sprite(0, 0, null);
        this.game.physics.p2.enable(sprite);
        var body = new Phaser.Physics.P2.Body(this.game, sprite, physicBody.x, physicBody.y, physicBody.mass);
        body.velocity.x = physicBody.velocity[0];
        body.velocity.y = physicBody.velocity[1];
        body.angle = physicBody.angle;
        var material = this.game.physics.p2.createMaterial(guid_1.Guid.newGuid(), body);
        var bodyOptions = physicBody.getPhysicsConfiguration();
        for (var _i = 0, _a = this.materialsAndOptions; _i < _a.length; _i++) {
            var materialAndOptions = _a[_i];
            this.generateContacts(material, bodyOptions.material, materialAndOptions[0], materialAndOptions[1]);
        }
        this.materialsAndOptions.push([material, bodyOptions.material]);
        return body;
    };
    Bootstrap.prototype.generateContacts = function (material1, options1, material2, options2) {
        var contactOptions = {};
        for (var key in options1) {
            contactOptions[key] = options1[key] + options2[key];
        }
        this.game.physics.p2.createContactMaterial(material1, material2, contactOptions);
    };
    Bootstrap.preloadComponents = [];
    Bootstrap.worldConfiguration = {
        bounds: {
            width: 1920,
            height: 1080
        },
        material: {
            restitution: 0
        }
    };
    Bootstrap.onInit = new rxjs_1.AsyncSubject();
    return Bootstrap;
}());
exports.Bootstrap = Bootstrap;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("@reactivex/rxjs");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var watch_model_1 = __webpack_require__(8);
var rxjs_1 = __webpack_require__(1);
var _ = __webpack_require__(9);
var WatchFactory = /** @class */ (function () {
    function WatchFactory() {
        this.watchsModel = [];
    }
    WatchFactory.prototype.create = function (getModel) {
        var watchModel = new watch_model_1.WatchModel();
        watchModel.observable = rxjs_1.Observable.create(function (observer) { return watchModel.observer = observer; }).map(function (model) { return _.cloneDeep(model); }).distinctUntilChanged(function (prev, next) { return _.isEqual(prev, next); });
        watchModel.getModel = getModel;
        this.watchsModel.push(watchModel);
        return watchModel.observable;
    };
    return WatchFactory;
}());
exports.WatchFactory = WatchFactory;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
exports.Bootstrap = bootstrap_1.Bootstrap;
var controller_1 = __webpack_require__(6);
exports.Controller = controller_1.Controller;
var view_1 = __webpack_require__(7);
exports.View = view_1.View;
exports.ViewComponent = view_1.ViewComponent;
var watch_factory_1 = __webpack_require__(2);
exports.WatchFactory = watch_factory_1.WatchFactory;
var physic_body_1 = __webpack_require__(10);
exports.PhysicBody = physic_body_1.PhysicBody;
var view_notifier_1 = __webpack_require__(12);
exports.ViewNotifier = view_notifier_1.ViewNotifier;


/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("phaser-ce");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Guid = /** @class */ (function () {
    function Guid() {
    }
    Guid.newGuid = function () {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    };
    return Guid;
}());
exports.Guid = Guid;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Controller accepts input from view and converts modifieds the model.
 */
var Controller = /** @class */ (function () {
    function Controller() {
    }
    return Controller;
}());
exports.Controller = Controller;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
var watch_factory_1 = __webpack_require__(2);
/**
 * Adds a component to the view and other view components
 */
var ViewComponentAdder = /** @class */ (function () {
    function ViewComponentAdder(components, view) {
        this.components = components;
        this.view = view;
    }
    ViewComponentAdder.prototype.addComponent = function (component) {
        this.components.push(component);
        component.createComponent(this, this.view);
        return component;
    };
    return ViewComponentAdder;
}());
exports.ViewComponentAdder = ViewComponentAdder;
/**
 * Input and ouput for the application
 */
var View = /** @class */ (function () {
    function View(bootstrap) {
        if (bootstrap === void 0) { bootstrap = bootstrap_1.Bootstrap.instance; }
        this.bootstrap = bootstrap;
        this.components = [];
        this.watchFactory = new watch_factory_1.WatchFactory();
        bootstrap.registerView(this);
    }
    View.prototype.refresh = function () {
        //empty, can be overrided or not
    };
    View.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    View.prototype.preload = function () {
        //empty, can be overrided or not
    };
    View.prototype.update = function () {
        //empty, can be overrided or not
    };
    View.prototype.show = function () {
        this.createView();
    };
    Object.defineProperty(View.prototype, "game", {
        get: function () { return this.bootstrap.game; },
        enumerable: true,
        configurable: true
    });
    View.prototype.createView = function () {
        var componentAdder = new ViewComponentAdder(this.components, this);
        this.create(componentAdder);
        this.updateOnModelChange(this.watchFactory);
    };
    View.prototype.updateView = function () {
        this.checkWatchModels();
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    View.prototype.updateOnModelChange = function (_watchFactory) {
        //this should be overrided or not
    };
    View.prototype.checkWatchModels = function () {
        for (var _i = 0, _a = this.watchFactory.watchsModel; _i < _a.length; _i++) {
            var watchModel = _a[_i];
            watchModel.observer.next(watchModel.getModel());
        }
    };
    return View;
}());
exports.View = View;
/**
 * Component to be showed in view
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent() {
        this.components = [];
    }
    ViewComponent.prototype.create = function (_componentAdder) {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.update = function () {
        //empty, can be overrided or not
    };
    ViewComponent.prototype.createComponent = function (componentAdder, view) {
        this.view = view;
        this.create(componentAdder);
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.createComponent(componentAdder, view);
        }
    };
    ViewComponent.prototype.updateComponent = function () {
        this.update();
        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {
            var component = _a[_i];
            component.updateComponent();
        }
    };
    Object.defineProperty(ViewComponent.prototype, "game", {
        get: function () {
            return this.view.game;
        },
        enumerable: true,
        configurable: true
    });
    return ViewComponent;
}());
exports.ViewComponent = ViewComponent;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WatchModel = /** @class */ (function () {
    function WatchModel() {
    }
    return WatchModel;
}());
exports.WatchModel = WatchModel;


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
var bootstrap_1 = __webpack_require__(0);
var body_property_1 = __webpack_require__(11);
var PhysicBody = /** @class */ (function () {
    function PhysicBody() {
        this.x = 0;
        this.y = 0;
        this.angle = 0;
        this.velocity = [0, 0];
        this.mass = 1;
        this.physics = {};
        bootstrap_1.Bootstrap.onInit.subscribe(this.onBootstrapInit.bind(this));
    }
    PhysicBody.prototype.createBody = function (_body) {
    };
    PhysicBody.prototype.onBootstrapInit = function (bootstrap) {
        this.body = bootstrap.createBody(this);
        var propertyClass = this;
        for (var _i = 0, _a = propertyClass['bodyProperties']; _i < _a.length; _i++) {
            var property = _a[_i];
            propertyClass['get' + property] = propertyClass['getBody' + property];
            propertyClass['set' + property] = propertyClass['setBody' + property];
        }
        this.createBody(this.body);
    };
    PhysicBody.prototype.getPhysicsConfiguration = function () {
        return this.physics;
    };
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "x", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "y", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "angle", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "velocity", void 0);
    __decorate([
        body_property_1.BodyProperty
    ], PhysicBody.prototype, "mass", void 0);
    return PhysicBody;
}());
exports.PhysicBody = PhysicBody;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function BodyProperty(target, key) {
    if (!target['bodyProperties'])
        target['bodyProperties'] = [];
    var privateKey = "_" + key;
    var upperKey = key.toUpperCase();
    var getKey = "get" + upperKey;
    var setKey = "set" + upperKey;
    var getBodyKey = "getBody" + upperKey;
    var setBodyKey = "setBody" + upperKey;
    target[getKey] = function () {
        return this[privateKey];
    };
    target[setKey] = function (value) {
        this[privateKey] = value;
    };
    target[getBodyKey] = function () {
        return this['body'][key];
    };
    target[setBodyKey] = function (value) {
        this['body'][key] = value;
    };
    function getter() {
        return this[getKey]();
    }
    function setter(value) {
        this[setKey](value);
    }
    Object.defineProperty(target, key, {
        get: getter,
        set: setter,
        enumerable: true,
        configurable: true
    });
    target['bodyProperties'].push(upperKey);
}
exports.BodyProperty = BodyProperty;


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var rxjs_1 = __webpack_require__(1);
var ViewNotifier = /** @class */ (function () {
    function ViewNotifier() {
        this.subject = new rxjs_1.Subject();
        this.observable = new rxjs_1.Observable().multicast(this.subject);
    }
    ViewNotifier.prototype.subscribe = function (observer) {
        this.observable.subscribe(observer);
    };
    ViewNotifier.prototype.publish = function (value) {
        this.subject.next(value);
    };
    return ViewNotifier;
}());
exports.ViewNotifier = ViewNotifier;


/***/ })
/******/ ])));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzg3MzJiY2VjNDE3ZDNlMGE2MzEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jvb3RzdHJhcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAcmVhY3RpdmV4L3J4anNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvd2F0Y2hfZmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGhhc2VyLWNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2d1aWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dhdGNoX21vZGVsLnRzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy8uL3NyYy9waHlzaWNfYm9keS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYm9keV9wcm9wZXJ0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld19ub3RpZmllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQzdEQTtHQUNHOztBQUVILG9DQUFvQztBQUNwQyxvQ0FBK0M7QUFLL0Msb0NB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QUFnQixLQUFVO1FBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsTUFBTSxDQUFDLGNBQWMsQ0FBRSxNQUFNLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLEdBQUcsRUFBRSxNQUFNO1FBQ1gsR0FBRyxFQUFFLE1BQU07UUFDWCxVQUFVLEVBQUUsSUFBSTtRQUNoQixZQUFZLEVBQUUsSUFBSTtLQUNuQixDQUFDLENBQUM7SUFFSCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUMsQ0FBQztBQTFDRCxvQ0EwQ0M7Ozs7Ozs7Ozs7QUMxQ0Qsb0NBQWdFO0FBRWhFO0lBSUU7UUFDRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksY0FBTyxFQUFLLENBQUM7UUFDaEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLGlCQUFVLEVBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFFTSxnQ0FBUyxHQUFoQixVQUFpQixRQUF3QjtRQUN2QyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRU0sOEJBQU8sR0FBZCxVQUFlLEtBQVM7UUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUNILG1CQUFDO0FBQUQsQ0FBQztBQWhCWSxvQ0FBWSIsImZpbGUiOiJwaGFzZXItbXZjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDc4NzMyYmNlYzQxN2QzZTBhNjMxIiwiLyoqXG4gKi9cblxuaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gJ3BoYXNlci1jZSc7XG5pbXBvcnQgeyBBc3luY1N1YmplY3QgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuXG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgUGh5c2ljQm9keSB9IGZyb20gJy4vcGh5c2ljX2JvZHknO1xuaW1wb3J0IHsgR3VpZCB9IGZyb20gJy4vZ3VpZCc7XG5cbmV4cG9ydCBjbGFzcyBCb290c3RyYXAge1xuICBwcml2YXRlIHN0YXRpYyBwcmVsb2FkQ29tcG9uZW50czogKChnYW1lOiBQaGFzZXIuR2FtZSkgPT4gdm9pZClbXSA9IFtdO1xuXG4gIHByaXZhdGUgc3RhdGljIF9pbnN0YW5jZTogQm9vdHN0cmFwO1xuXG4gIHB1YmxpYyBnYW1lOiBQaGFzZXIuR2FtZTtcblxuICBwdWJsaWMgc3RhdGljIHdvcmxkQ29uZmlndXJhdGlvbjogYW55ID0ge1xuICAgIGJvdW5kczoge1xuICAgICAgd2lkdGg6IDE5MjAsXG4gICAgICBoZWlnaHQ6IDEwODBcbiAgICB9LFxuICAgIG1hdGVyaWFsOiB7XG4gICAgICByZXN0aXR1dGlvbjogMFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVmYXVsdEFjdGlvbjogKCkgPT4gdm9pZDtcblxuICBwcml2YXRlIHZpZXdzOiBWaWV3W10gPSBbXTtcblxuICBwdWJsaWMgc3RhdGljIGdldCBpbnN0YW5jZSgpe1xuICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZSB8fCAodGhpcy5faW5zdGFuY2UgPSBuZXcgdGhpcygpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgb25Jbml0OiBBc3luY1N1YmplY3Q8Qm9vdHN0cmFwPiA9IG5ldyBBc3luY1N1YmplY3Q8Qm9vdHN0cmFwPigpO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcigpe1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBwcmVsb2FkKHByZWxvYWQ6IChnYW1lOiBQaGFzZXIuR2FtZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIEJvb3RzdHJhcC5wcmVsb2FkQ29tcG9uZW50cy5wdXNoKHByZWxvYWQpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBydW4oZGVmYXVsdEFjdGlvbjogKCkgPT4gdm9pZCl7XG4gICAgQm9vdHN0cmFwLmluc3RhbmNlLmRlZmF1bHRBY3Rpb24gPSBkZWZhdWx0QWN0aW9uO1xuICAgIEJvb3RzdHJhcC5pbnN0YW5jZS5zdGFydEVuZ2luZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRFbmdpbmVzKCl7XG4gICAgdGhpcy5nYW1lID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgQm9vdHN0cmFwLndvcmxkQ29uZmlndXJhdGlvbi5ib3VuZHMud2lkdGgsXG4gICAgICBCb290c3RyYXAud29ybGRDb25maWd1cmF0aW9uLmJvdW5kcy5oZWlnaHQsXG4gICAgICBQaGFzZXIuQ0FOVkFTLFxuICAgICAgJ2NvbnRlbnQnLFxuICAgICAgeyBwcmVsb2FkOiB0aGlzLnByZWxvYWQsXG4gICAgICAgIGNyZWF0ZTogdGhpcy5jcmVhdGUsXG4gICAgICAgIHVwZGF0ZTogdGhpcy51cGRhdGV9KTtcbiAgfVxuXG4gIHB1YmxpYyBwcmVsb2FkID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgcHJlbG9hZCBvZiBCb290c3RyYXAucHJlbG9hZENvbXBvbmVudHMpIHtcbiAgICAgIHByZWxvYWQodGhpcy5nYW1lKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMud29ybGRDdXN0b21pemF0aW9ucygpO1xuICAgIHRoaXMuZ2FtZS5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLlNIT1dfQUxMO1xuXG4gICAgdGhpcy5kZWZhdWx0QWN0aW9uKCk7XG5cbiAgICBCb290c3RyYXAub25Jbml0Lm5leHQodGhpcyk7XG4gICAgQm9vdHN0cmFwLm9uSW5pdC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLnVwZGF0ZVZpZXdzKCk7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJWaWV3KHZpZXc6IFZpZXcpe1xuICAgIHRoaXMudmlld3MucHVzaCh2aWV3KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmlld3MoKXtcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2YgdGhpcy52aWV3cyl7XG4gICAgICB2aWV3LnVwZGF0ZVZpZXcoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG1hdGVyaWFsc0FuZE9wdGlvbnM6IEFycmF5PFtQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbCwgYW55XT4gPSBbXTtcblxuICBwcml2YXRlIHdvcmxkQ3VzdG9taXphdGlvbnMoKXtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5QMkpTKTtcbiAgICBjb25zdCB3b3JsZE1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoJ3dvcmxkTWF0ZXJpYWwnKTtcblxuICAgIHRoaXMubWF0ZXJpYWxzQW5kT3B0aW9ucy5wdXNoKFt3b3JsZE1hdGVyaWFsLCBCb290c3RyYXAud29ybGRDb25maWd1cmF0aW9uLm1hdGVyaWFsXSk7XG5cbiAgICB0aGlzLmdhbWUucGh5c2ljcy5wMi5zZXRXb3JsZE1hdGVyaWFsKHdvcmxkTWF0ZXJpYWwsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmdyYXZpdHkueSA9IDEwMDtcblxuICB9XG5cblxuICBwdWJsaWMgY3JlYXRlQm9keShwaHlzaWNCb2R5OiBQaHlzaWNCb2R5KXtcbiAgICBjb25zdCBzcHJpdGUgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSgwLDAsIG51bGwpO1xuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmVuYWJsZShzcHJpdGUpO1xuICAgIGNvbnN0IGJvZHkgPSBuZXcgUGhhc2VyLlBoeXNpY3MuUDIuQm9keSh0aGlzLmdhbWUsIHNwcml0ZSwgcGh5c2ljQm9keS54LCBwaHlzaWNCb2R5LnksIHBoeXNpY0JvZHkubWFzcyk7XG4gICAgYm9keS52ZWxvY2l0eS54ID0gcGh5c2ljQm9keS52ZWxvY2l0eVswXTtcbiAgICBib2R5LnZlbG9jaXR5LnkgPSBwaHlzaWNCb2R5LnZlbG9jaXR5WzFdO1xuICAgIGJvZHkuYW5nbGUgPSBwaHlzaWNCb2R5LmFuZ2xlO1xuICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5nYW1lLnBoeXNpY3MucDIuY3JlYXRlTWF0ZXJpYWwoR3VpZC5uZXdHdWlkKCksIGJvZHkpO1xuICAgIGNvbnN0IGJvZHlPcHRpb25zID0gcGh5c2ljQm9keS5nZXRQaHlzaWNzQ29uZmlndXJhdGlvbigpO1xuICAgIGZvcihjb25zdCBtYXRlcmlhbEFuZE9wdGlvbnMgb2YgdGhpcy5tYXRlcmlhbHNBbmRPcHRpb25zKXtcbiAgICAgIHRoaXMuZ2VuZXJhdGVDb250YWN0cyhtYXRlcmlhbCwgYm9keU9wdGlvbnMubWF0ZXJpYWwsIG1hdGVyaWFsQW5kT3B0aW9uc1swXSwgbWF0ZXJpYWxBbmRPcHRpb25zWzFdKTtcbiAgICB9XG5cbiAgICB0aGlzLm1hdGVyaWFsc0FuZE9wdGlvbnMucHVzaChbbWF0ZXJpYWwsIGJvZHlPcHRpb25zLm1hdGVyaWFsXSk7XG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ29udGFjdHMobWF0ZXJpYWwxOiBQaGFzZXIuUGh5c2ljcy5QMi5NYXRlcmlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMxOiBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDI6IFBoYXNlci5QaHlzaWNzLlAyLk1hdGVyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczI6IGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICApe1xuICAgIGxldCBjb250YWN0T3B0aW9uczogYW55ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9uczEpe1xuICAgICAgY29udGFjdE9wdGlvbnNba2V5XSA9IG9wdGlvbnMxW2tleV0gKyBvcHRpb25zMltrZXldO1xuICAgIH1cblxuICAgIHRoaXMuZ2FtZS5waHlzaWNzLnAyLmNyZWF0ZUNvbnRhY3RNYXRlcmlhbChtYXRlcmlhbDEsIG1hdGVyaWFsMiwgY29udGFjdE9wdGlvbnMpO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9vdHN0cmFwLnRzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQHJlYWN0aXZleC9yeGpzXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHJlYWN0aXZleC9yeGpzXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgV2F0Y2hNb2RlbCB9IGZyb20gJy4vd2F0Y2hfbW9kZWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIgfSBmcm9tICdAcmVhY3RpdmV4L3J4anMnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgY2xhc3MgV2F0Y2hGYWN0b3J5IHtcbiAgcHVibGljIHdhdGNoc01vZGVsOiBXYXRjaE1vZGVsPGFueT5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCl7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlPFQ+KGdldE1vZGVsOiAoKSA9PiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3Qgd2F0Y2hNb2RlbCA9IG5ldyBXYXRjaE1vZGVsPFQ+KCk7XG5cbiAgICB3YXRjaE1vZGVsLm9ic2VydmFibGUgPSBPYnNlcnZhYmxlLmNyZWF0ZShcbiAgICAgIChvYnNlcnZlcjogT2JzZXJ2ZXI8KCkgPT4gVD4pID0+IHdhdGNoTW9kZWwub2JzZXJ2ZXIgPSBvYnNlcnZlclxuICAgICkubWFwKFxuICAgICAgKG1vZGVsOiBUKSA9PiBfLmNsb25lRGVlcChtb2RlbClcbiAgICApLmRpc3RpbmN0VW50aWxDaGFuZ2VkKFxuICAgICAgKHByZXY6IFQsIG5leHQ6IFQpID0+IF8uaXNFcXVhbChwcmV2LCBuZXh0KVxuICAgICk7XG5cbiAgICB3YXRjaE1vZGVsLmdldE1vZGVsID0gZ2V0TW9kZWw7XG5cbiAgICB0aGlzLndhdGNoc01vZGVsLnB1c2god2F0Y2hNb2RlbCk7IFxuXG4gICAgcmV0dXJuIHdhdGNoTW9kZWwub2JzZXJ2YWJsZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dhdGNoX2ZhY3RvcnkudHMiLCJleHBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5leHBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmV4cG9ydCB7IFZpZXcsIFZpZXdDb21wb25lbnQgfSBmcm9tICcuL3ZpZXcnO1xuZXhwb3J0IHsgV2F0Y2hGYWN0b3J5IH0gZnJvbSAnLi93YXRjaF9mYWN0b3J5JztcbmV4cG9ydCB7IFBoeXNpY0JvZHkgfSBmcm9tICcuL3BoeXNpY19ib2R5JztcbmV4cG9ydCB7IFZpZXdOb3RpZmllciB9IGZyb20gJy4vdmlld19ub3RpZmllcic7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXgudHMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwaGFzZXItY2VcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJwaGFzZXItY2VcIlxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnQgY2xhc3MgR3VpZCB7XG4gICAgc3RhdGljIG5ld0d1aWQoKSB7XG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSoxNnwwLCB2ID0gYyA9PSAneCcgPyByIDogKHImMHgzfDB4OCk7XG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9ndWlkLnRzIiwiLyoqXG4gKiBDb250cm9sbGVyIGFjY2VwdHMgaW5wdXQgZnJvbSB2aWV3IGFuZCBjb252ZXJ0cyBtb2RpZmllZHMgdGhlIG1vZGVsLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29udHJvbGxlciB7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29udHJvbGxlci50cyIsImltcG9ydCAqIGFzIFBoYXNlciBmcm9tICdwaGFzZXItY2UnO1xuXG5pbXBvcnQgeyBCb290c3RyYXAgfSBmcm9tICcuL2Jvb3RzdHJhcCc7XG5pbXBvcnQgeyBXYXRjaE1vZGVsIH0gZnJvbSAnLi93YXRjaF9tb2RlbCc7XG5pbXBvcnQgeyBXYXRjaEZhY3RvcnkgfSBmcm9tICcuL3dhdGNoX2ZhY3RvcnknO1xuXG4vKipcbiAqIEFkZHMgYSBjb21wb25lbnQgdG8gdGhlIHZpZXcgYW5kIG90aGVyIHZpZXcgY29tcG9uZW50c1xuICovXG5leHBvcnQgY2xhc3MgVmlld0NvbXBvbmVudEFkZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50W10sIHByaXZhdGUgdmlldzogVmlldykge31cblxuICBwdWJsaWMgYWRkQ29tcG9uZW50PFQgZXh0ZW5kcyBWaWV3Q29tcG9uZW50Pihjb21wb25lbnQ6IFQpOiBUIHtcbiAgICB0aGlzLmNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQodGhpcywgdGhpcy52aWV3KTtcblxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBJbnB1dCBhbmQgb3VwdXQgZm9yIHRoZSBhcHBsaWNhdGlvblxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlldyB7XG4gIHByb3RlY3RlZCBjb21wb25lbnRzOiBWaWV3Q29tcG9uZW50W10gPSBbXTtcbiAgcHJpdmF0ZSB3YXRjaEZhY3Rvcnk6IFdhdGNoRmFjdG9yeSA9IG5ldyBXYXRjaEZhY3RvcnkoKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJvb3RzdHJhcDogQm9vdHN0cmFwID0gQm9vdHN0cmFwLmluc3RhbmNlKXtcbiAgICBib290c3RyYXAucmVnaXN0ZXJWaWV3KHRoaXMpO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2goKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuICBwdWJsaWMgY3JlYXRlKF9jb21wb25lbnRBZGRlcjogVmlld0NvbXBvbmVudEFkZGVyKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuICBwdWJsaWMgcHJlbG9hZCgpIHtcbiAgICAvL2VtcHR5LCBjYW4gYmUgb3ZlcnJpZGVkIG9yIG5vdFxuICB9XG4gIHB1YmxpYyB1cGRhdGUoKSB7XG4gICAgLy9lbXB0eSwgY2FuIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHB1YmxpYyBzaG93KCkge1xuICAgIHRoaXMuY3JlYXRlVmlldygpO1xuICB9XG5cbiAgZ2V0IGdhbWUoKTogUGhhc2VyLkdhbWUgeyByZXR1cm4gdGhpcy5ib290c3RyYXAuZ2FtZTsgfVxuXG4gIHByaXZhdGUgY3JlYXRlVmlldygpIHtcbiAgICBjb25zdCBjb21wb25lbnRBZGRlciA9IG5ldyBWaWV3Q29tcG9uZW50QWRkZXIodGhpcy5jb21wb25lbnRzLCB0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZShjb21wb25lbnRBZGRlcik7XG4gICAgdGhpcy51cGRhdGVPbk1vZGVsQ2hhbmdlKHRoaXMud2F0Y2hGYWN0b3J5KTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWaWV3KCkge1xuICAgIHRoaXMuY2hlY2tXYXRjaE1vZGVscygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5jb21wb25lbnRzKSB7XG4gICAgICBjb21wb25lbnQudXBkYXRlQ29tcG9uZW50KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZU9uTW9kZWxDaGFuZ2UoX3dhdGNoRmFjdG9yeTogV2F0Y2hGYWN0b3J5KXtcbiAgICAvL3RoaXMgc2hvdWxkIGJlIG92ZXJyaWRlZCBvciBub3RcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tXYXRjaE1vZGVscygpe1xuICAgIGZvcihjb25zdCB3YXRjaE1vZGVsIG9mIHRoaXMud2F0Y2hGYWN0b3J5LndhdGNoc01vZGVsKXtcbiAgICAgIHdhdGNoTW9kZWwub2JzZXJ2ZXIubmV4dCh3YXRjaE1vZGVsLmdldE1vZGVsKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBvbmVudCB0byBiZSBzaG93ZWQgaW4gdmlld1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlld0NvbXBvbmVudCB7XG4gIHB1YmxpYyB2aWV3OiBWaWV3O1xuICBwcm90ZWN0ZWQgY29tcG9uZW50czogVmlld0NvbXBvbmVudFtdID0gW107XG5cbiAgcHVibGljIGNyZWF0ZShfY29tcG9uZW50QWRkZXI6IFZpZXdDb21wb25lbnRBZGRlcik6IHZvaWQge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xuICAgIC8vZW1wdHksIGNhbiBiZSBvdmVycmlkZWQgb3Igbm90XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlQ29tcG9uZW50KGNvbXBvbmVudEFkZGVyOiBWaWV3Q29tcG9uZW50QWRkZXIsIHZpZXc6IFZpZXcpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgIHRoaXMuY3JlYXRlKGNvbXBvbmVudEFkZGVyKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC5jcmVhdGVDb21wb25lbnQoY29tcG9uZW50QWRkZXIsIHZpZXcpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVDb21wb25lbnQoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbXBvbmVudC51cGRhdGVDb21wb25lbnQoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGdhbWUoKTogUGhhc2VyLkdhbWUge1xuICAgIHJldHVybiB0aGlzLnZpZXcuZ2FtZTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ZpZXcudHMiLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcyc7XG5cbmV4cG9ydCBjbGFzcyBXYXRjaE1vZGVsPFQ+IHtcbiAgb2JzZXJ2YWJsZTogT2JzZXJ2YWJsZTxUPjtcbiAgb2JzZXJ2ZXI6IE9ic2VydmVyPCgpID0+IFQ+O1xuICBnZXRNb2RlbDogKCkgPT4gVDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93YXRjaF9tb2RlbC50cyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImxvZGFzaFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImxvZGFzaFwiXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICovXG5cbmltcG9ydCB7IEJvb3RzdHJhcCB9IGZyb20gJy4vYm9vdHN0cmFwJztcbmltcG9ydCB7IEJvZHlQcm9wZXJ0eSB9IGZyb20gJy4vYm9keV9wcm9wZXJ0eSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQaHlzaWNCb2R5IHtcbiAgcHJpdmF0ZSBib2R5OiBQaGFzZXIuUGh5c2ljcy5QMi5Cb2R5O1xuXG4gIEBCb2R5UHJvcGVydHlcbiAgcHVibGljIHg6IG51bWJlciA9IDA7XG5cbiAgQEJvZHlQcm9wZXJ0eVxuICBwdWJsaWMgeTogbnVtYmVyID0gMDtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyBhbmdsZTogbnVtYmVyID0gMDtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyB2ZWxvY2l0eTogW251bWJlciwgbnVtYmVyXSA9IFswLCAwXTtcblxuICBAQm9keVByb3BlcnR5XG4gIHB1YmxpYyBtYXNzOiBudW1iZXIgPSAxO1xuXG4gIHByb3RlY3RlZCBwaHlzaWNzOiBhbnkgPSB7fTtcblxuICBjb25zdHJ1Y3Rvcigpe1xuICAgIEJvb3RzdHJhcC5vbkluaXQuc3Vic2NyaWJlKHRoaXMub25Cb290c3RyYXBJbml0LmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUJvZHkoX2JvZHk6IFBoYXNlci5QaHlzaWNzLlAyLkJvZHkpe1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uQm9vdHN0cmFwSW5pdChib290c3RyYXA6IEJvb3RzdHJhcCl7XG4gICAgdGhpcy5ib2R5ID0gYm9vdHN0cmFwLmNyZWF0ZUJvZHkodGhpcyk7XG5cbiAgICBjb25zdCBwcm9wZXJ0eUNsYXNzID0gPGFueT50aGlzO1xuXG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBwcm9wZXJ0eUNsYXNzWydib2R5UHJvcGVydGllcyddKXtcbiAgICAgIHByb3BlcnR5Q2xhc3NbJ2dldCcgKyBwcm9wZXJ0eV0gPSBwcm9wZXJ0eUNsYXNzWydnZXRCb2R5JyArIHByb3BlcnR5XTtcbiAgICAgIHByb3BlcnR5Q2xhc3NbJ3NldCcgKyBwcm9wZXJ0eV0gPSBwcm9wZXJ0eUNsYXNzWydzZXRCb2R5JyArIHByb3BlcnR5XTtcbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZUJvZHkodGhpcy5ib2R5KTtcbiAgfVxuXG5cbiAgcHVibGljIGdldFBoeXNpY3NDb25maWd1cmF0aW9uKCk6IGFueXtcbiAgICByZXR1cm4gdGhpcy5waHlzaWNzO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGh5c2ljX2JvZHkudHMiLCJleHBvcnQgZnVuY3Rpb24gQm9keVByb3BlcnR5KHRhcmdldDogYW55LCBrZXk6IHN0cmluZyl7XG4gIGlmICghdGFyZ2V0Wydib2R5UHJvcGVydGllcyddKSB0YXJnZXRbJ2JvZHlQcm9wZXJ0aWVzJ10gPSBbXTtcblxuICBjb25zdCBwcml2YXRlS2V5ID0gXCJfXCIgKyBrZXk7XG4gIGNvbnN0IHVwcGVyS2V5ID0ga2V5LnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IGdldEtleSA9IFwiZ2V0XCIgKyB1cHBlcktleTtcbiAgY29uc3Qgc2V0S2V5ID0gXCJzZXRcIiArIHVwcGVyS2V5O1xuICBjb25zdCBnZXRCb2R5S2V5ID0gXCJnZXRCb2R5XCIgKyB1cHBlcktleTtcbiAgY29uc3Qgc2V0Qm9keUtleSA9IFwic2V0Qm9keVwiICsgdXBwZXJLZXk7XG5cbiAgdGFyZ2V0W2dldEtleV0gPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzW3ByaXZhdGVLZXldO1xuICB9XG5cbiAgdGFyZ2V0W3NldEtleV0gPSBmdW5jdGlvbih2YWx1ZTogYW55KXtcbiAgICB0aGlzW3ByaXZhdGVLZXldID0gdmFsdWU7XG4gIH1cblxuICB0YXJnZXRbZ2V0Qm9keUtleV0gPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzWydib2R5J11ba2V5XTtcbiAgfVxuXG4gIHRhcmdldFtzZXRCb2R5S2V5XSA9IGZ1bmN0aW9uKHZhbHVlOiBhbnkpe1xuICAgIHRoaXNbJ2JvZHknXVtrZXldID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXR0ZXIoKXtcbiAgICByZXR1cm4gdGhpc1tnZXRLZXldKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXR0ZXIodmFsdWU6IGFueSl7XG4gICAgdGhpc1tzZXRLZXldKHZhbHVlKTtcbiAgfVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGFyZ2V0LCBrZXksIHtcbiAgICBnZXQ6IGdldHRlcixcbiAgICBzZXQ6IHNldHRlcixcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcblxuICB0YXJnZXRbJ2JvZHlQcm9wZXJ0aWVzJ10ucHVzaCh1cHBlcktleSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYm9keV9wcm9wZXJ0eS50cyIsImltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyLCBTdWJqZWN0IH0gZnJvbSAnQHJlYWN0aXZleC9yeGpzJztcblxuZXhwb3J0IGNsYXNzIFZpZXdOb3RpZmllcjxUPiB7XG4gIHByaXZhdGUgb2JzZXJ2YWJsZTogT2JzZXJ2YWJsZTxUPjtcbiAgcHJpdmF0ZSBzdWJqZWN0OiBTdWJqZWN0PFQ+O1xuXG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5zdWJqZWN0ID0gbmV3IFN1YmplY3Q8VD4oKTtcbiAgICB0aGlzLm9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxUPigpLm11bHRpY2FzdCh0aGlzLnN1YmplY3QpO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZShvYnNlcnZlcjogKHQ6IFQpID0+IHZvaWQpe1xuICAgIHRoaXMub2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICB9XG5cbiAgcHVibGljIHB1Ymxpc2godmFsdWU/OiBUKXtcbiAgICB0aGlzLnN1YmplY3QubmV4dCh2YWx1ZSk7XG4gIH1cbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3ZpZXdfbm90aWZpZXIudHMiXSwic291cmNlUm9vdCI6IiJ9